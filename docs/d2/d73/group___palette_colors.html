<!-- HTML header for doxygen 1.9.3-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.12.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FastLED: Palette Color Functions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../fastled_logo.png" type="image/svg+xml" rel="shortcut icon" />
<link href="../../fastled-docs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">DoxygenAwesomeDarkModeToggle.init()</script>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="../../fastled_logo.png"/></td>
  <td id="projectalign">
   <div id="projectname">FastLED<span id="projectnumber">&#160;3.5.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.12.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(1); });
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('d2/d73/group___palette_colors.html','../../'); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">Palette Color Functions<div class="ingroups"><a class="el" href="../../d4/d98/group___color_palettes.html">Color Palettes</a></div></div></div>
</div><!--header-->
<div class="contents">
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>Functions to retrieve smooth color data from palettes </p>
<div id="dynsection-0" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-0-trigger" src="../../closed.png" alt="+"/> Collaboration diagram for Palette Color Functions:</div>
<div id="dynsection-0-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-0-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 0 --></div>
</div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="enum-members" name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:ga565c04e626af4a3ec44bf97edc607b4e" id="r_ga565c04e626af4a3ec44bf97edc607b4e"><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> { <a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a> =0
, <a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a> =1
, <a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a> =2
 }</td></tr>
<tr class="memdesc:ga565c04e626af4a3ec44bf97edc607b4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Color interpolation options for palette.  <a href="#ga565c04e626af4a3ec44bf97edc607b4e">More...</a><br /></td></tr>
<tr class="separator:ga565c04e626af4a3ec44bf97edc607b4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gafdfc20fbf9b8e4b71e010a654ec27891" id="r_gafdfc20fbf9b8e4b71e010a654ec27891"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gafdfc20fbf9b8e4b71e010a654ec27891">ColorFromPalette</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#d8/dfa/class_c_h_s_v_palette16">CHSVPalette16</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:gafdfc20fbf9b8e4b71e010a654ec27891"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.     <br /></td></tr>
<tr class="separator:gafdfc20fbf9b8e4b71e010a654ec27891"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga79c94ea554455e72eabab172cc15456f" id="r_ga79c94ea554455e72eabab172cc15456f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga79c94ea554455e72eabab172cc15456f">ColorFromPalette</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#d5/db4/class_c_h_s_v_palette256">CHSVPalette256</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>)</td></tr>
<tr class="memdesc:ga79c94ea554455e72eabab172cc15456f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.     <br /></td></tr>
<tr class="separator:ga79c94ea554455e72eabab172cc15456f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga1684ed7eb860c68a915d03e94250e58a" id="r_ga1684ed7eb860c68a915d03e94250e58a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga1684ed7eb860c68a915d03e94250e58a">ColorFromPalette</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#da/dbb/class_c_h_s_v_palette32">CHSVPalette32</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:ga1684ed7eb860c68a915d03e94250e58a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.     <br /></td></tr>
<tr class="separator:ga1684ed7eb860c68a915d03e94250e58a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac46e65aff3dd6519b33e27f0998f17cd" id="r_gac46e65aff3dd6519b33e27f0998f17cd"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gac46e65aff3dd6519b33e27f0998f17cd">ColorFromPalette</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:gac46e65aff3dd6519b33e27f0998f17cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.  <br /></td></tr>
<tr class="separator:gac46e65aff3dd6519b33e27f0998f17cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf65fa1b4fedbbd7b8054a71e1b6474b3" id="r_gaf65fa1b4fedbbd7b8054a71e1b6474b3"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaf65fa1b4fedbbd7b8054a71e1b6474b3">ColorFromPalette</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#de/d34/class_c_r_g_b_palette256">CRGBPalette256</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>)</td></tr>
<tr class="memdesc:gaf65fa1b4fedbbd7b8054a71e1b6474b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.     <br /></td></tr>
<tr class="separator:gaf65fa1b4fedbbd7b8054a71e1b6474b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gae5e137a13a4b6145fe40007328d398f4" id="r_gae5e137a13a4b6145fe40007328d398f4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gae5e137a13a4b6145fe40007328d398f4">ColorFromPalette</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#df/d3d/class_c_r_g_b_palette32">CRGBPalette32</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:gae5e137a13a4b6145fe40007328d398f4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.     <br /></td></tr>
<tr class="separator:gae5e137a13a4b6145fe40007328d398f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga0a1bd774cd65ee7b85a20c11212bbd95" id="r_ga0a1bd774cd65ee7b85a20c11212bbd95"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga0a1bd774cd65ee7b85a20c11212bbd95">ColorFromPalette</a> (const <a class="el" href="../../d1/dfb/colorutils_8h.html#a3ce4f8424098c820a739f95cf86d7663">TProgmemRGBPalette16</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:ga0a1bd774cd65ee7b85a20c11212bbd95"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.     <br /></td></tr>
<tr class="separator:ga0a1bd774cd65ee7b85a20c11212bbd95"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaea6bd3ab3ec62d88e2dcc7ab2486dcd4" id="r_gaea6bd3ab3ec62d88e2dcc7ab2486dcd4"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#gaea6bd3ab3ec62d88e2dcc7ab2486dcd4">ColorFromPalette</a> (const <a class="el" href="../../d1/dfb/colorutils_8h.html#a0402dc727d6a118cf426da017ff42152">TProgmemRGBPalette32</a> &amp;pal, uint8_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:gaea6bd3ab3ec62d88e2dcc7ab2486dcd4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get a color from a palette.     <br /></td></tr>
<tr class="separator:gaea6bd3ab3ec62d88e2dcc7ab2486dcd4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga61f55da5eb81ddc50f7855b26fb0d69b" id="r_ga61f55da5eb81ddc50f7855b26fb0d69b"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga61f55da5eb81ddc50f7855b26fb0d69b">ColorFromPaletteExtended</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;pal, uint16_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType)</td></tr>
<tr class="memdesc:ga61f55da5eb81ddc50f7855b26fb0d69b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as ColorFromPalette, but with uint16_t <code>index</code> to give greater precision.  <br /></td></tr>
<tr class="separator:ga61f55da5eb81ddc50f7855b26fb0d69b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga681c8340a30e692e7bbfec5a104cc80f" id="r_ga681c8340a30e692e7bbfec5a104cc80f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga681c8340a30e692e7bbfec5a104cc80f">ColorFromPaletteExtended</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#de/d34/class_c_r_g_b_palette256">CRGBPalette256</a> &amp;pal, uint16_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType)</td></tr>
<tr class="separator:ga681c8340a30e692e7bbfec5a104cc80f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga59c2f3e8a12b9eef789c37ae4d5f0182" id="r_ga59c2f3e8a12b9eef789c37ae4d5f0182"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga59c2f3e8a12b9eef789c37ae4d5f0182">ColorFromPaletteExtended</a> (const <a class="el" href="../../d6/d39/group___palette_classes.html#df/d3d/class_c_r_g_b_palette32">CRGBPalette32</a> &amp;pal, uint16_t index, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType)</td></tr>
<tr class="memdesc:ga59c2f3e8a12b9eef789c37ae4d5f0182"><td class="mdescLeft">&#160;</td><td class="mdescRight">Same as ColorFromPalette, but higher precision.  <br /></td></tr>
<tr class="separator:ga59c2f3e8a12b9eef789c37ae4d5f0182"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac3c3f6bd497b7916177d7cb95aa5a76c" id="r_gac3c3f6bd497b7916177d7cb95aa5a76c"><td class="memTemplParams" colspan="2">template&lt;typename PALETTE &gt; </td></tr>
<tr class="memitem:gac3c3f6bd497b7916177d7cb95aa5a76c"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#gac3c3f6bd497b7916177d7cb95aa5a76c">fill_palette</a> (<a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> *L, uint16_t N, uint8_t startIndex, uint8_t incIndex, const PALETTE &amp;pal, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:gac3c3f6bd497b7916177d7cb95aa5a76c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill a range of LEDs with a sequence of entries from a palette.  <br /></td></tr>
<tr class="separator:gac3c3f6bd497b7916177d7cb95aa5a76c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga08fe42a864e3a7ee802d89a9b72d97c1" id="r_ga08fe42a864e3a7ee802d89a9b72d97c1"><td class="memTemplParams" colspan="2">template&lt;typename PALETTE &gt; </td></tr>
<tr class="memitem:ga08fe42a864e3a7ee802d89a9b72d97c1"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#ga08fe42a864e3a7ee802d89a9b72d97c1">fill_palette_circular</a> (<a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> *L, uint16_t N, uint8_t startIndex, const PALETTE &amp;pal, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>, bool reversed=false)</td></tr>
<tr class="memdesc:ga08fe42a864e3a7ee802d89a9b72d97c1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Fill a range of LEDs with a sequence of entries from a palette, so that the entire palette smoothly covers the range of LEDs.  <br /></td></tr>
<tr class="separator:ga08fe42a864e3a7ee802d89a9b72d97c1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf34a692bbec05b697dc9c06d8bb0f74f" id="r_gaf34a692bbec05b697dc9c06d8bb0f74f"><td class="memTemplParams" colspan="2">template&lt;typename PALETTE &gt; </td></tr>
<tr class="memitem:gaf34a692bbec05b697dc9c06d8bb0f74f"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="#gaf34a692bbec05b697dc9c06d8bb0f74f">map_data_into_colors_through_palette</a> (uint8_t *dataArray, uint16_t dataCount, <a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> *targetColorArray, const PALETTE &amp;pal, uint8_t <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>=255, uint8_t opacity=255, <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a> blendType=<a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>)</td></tr>
<tr class="memdesc:gaf34a692bbec05b697dc9c06d8bb0f74f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maps an array of palette color indexes into an array of LED colors.  <br /></td></tr>
<tr class="separator:gaf34a692bbec05b697dc9c06d8bb0f74f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga361799a4ba193694ad974079c980430c" id="r_ga361799a4ba193694ad974079c980430c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="#ga361799a4ba193694ad974079c980430c">nblendPaletteTowardPalette</a> (<a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;<a class="el" href="../../d1/dc5/_color_palette_8ino.html#acbe8fb0854d08fec34211bbb130b9276">currentPalette</a>, <a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;targetPalette, uint8_t maxChanges=24)</td></tr>
<tr class="memdesc:ga361799a4ba193694ad974079c980430c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Alter one palette by making it slightly more like a "target palette".  <br /></td></tr>
<tr class="separator:ga361799a4ba193694ad974079c980430c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Enumeration Type Documentation</h2>
<a id="ga565c04e626af4a3ec44bf97edc607b4e" name="ga565c04e626af4a3ec44bf97edc607b4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga565c04e626af4a3ec44bf97edc607b4e">&#9670;&#160;</a></span>TBlendType</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Color interpolation options for palette. </p>
<table class="fieldtable">
<tr><th colspan="2">Enumerator</th></tr><tr><td class="fieldname"><a id="gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00" name="gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00"></a>NOBLEND&#160;</td><td class="fielddoc"><p>No interpolation between palette entries. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06" name="gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06"></a>LINEARBLEND&#160;</td><td class="fielddoc"><p>Linear interpolation between palette entries, with wrap-around from end to the beginning again. </p>
</td></tr>
<tr><td class="fieldname"><a id="gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014" name="gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014"></a>LINEARBLEND_NOWRAP&#160;</td><td class="fielddoc"><p>Linear interpolation between palette entries, but no wrap-around. </p>
</td></tr>
</table>

<p class="definition">Definition at line <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01991">1991</a> of file <a class="el" href="../../d1/dfb/colorutils_8h_source.html">colorutils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1991</span>             {</div>
<div class="line"><span class="lineno"> 1992</span>    <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>=0,            </div>
<div class="line"><span class="lineno"> 1993</span>    <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a>=1,        </div>
<div class="line"><span class="lineno"> 1994</span>    <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a>=2  </div>
<div class="line"><span class="lineno"> 1995</span>} <a class="code hl_enumeration" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a>;</div>
<div class="ttc" id="agroup___palette_colors_html_ga565c04e626af4a3ec44bf97edc607b4e"><div class="ttname"><a href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></div><div class="ttdeci">TBlendType</div><div class="ttdoc">Color interpolation options for palette.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dfb/colorutils_8h_source.html#l01991">colorutils.h:1991</a></div></div>
<div class="ttc" id="agroup___palette_colors_html_gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00"><div class="ttname"><a href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a></div><div class="ttdeci">@ NOBLEND</div><div class="ttdoc">No interpolation between palette entries.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dfb/colorutils_8h_source.html#l01992">colorutils.h:1992</a></div></div>
<div class="ttc" id="agroup___palette_colors_html_gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06"><div class="ttname"><a href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></div><div class="ttdeci">@ LINEARBLEND</div><div class="ttdoc">Linear interpolation between palette entries, with wrap-around from end to the beginning again.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dfb/colorutils_8h_source.html#l01993">colorutils.h:1993</a></div></div>
<div class="ttc" id="agroup___palette_colors_html_gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014"><div class="ttname"><a href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a></div><div class="ttdeci">@ LINEARBLEND_NOWRAP</div><div class="ttdoc">Linear interpolation between palette entries, but no wrap-around.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dfb/colorutils_8h_source.html#l01995">colorutils.h:1994</a></div></div>
</div><!-- fragment -->
</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="gafdfc20fbf9b8e4b71e010a654ec27891" name="gafdfc20fbf9b8e4b71e010a654ec27891"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gafdfc20fbf9b8e4b71e010a654ec27891">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[1/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#d8/dfa/class_c_h_s_v_palette16">CHSVPalette16</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette.    </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND)    </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01113">1113</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1114</span>{</div>
<div class="line"><span class="lineno"> 1115</span>   <span class="keywordflow">if</span> ( blendType == <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a>) {</div>
<div class="line"><span class="lineno"> 1116</span>     index = <a class="code hl_function" href="../../d6/d19/group___linear_interpolation.html#gaf65357c7aeca9778e5a2f80a6bac2b5d">map8</a>(index, 0, 239);  <span class="comment">// Blend range is affected by lo4 blend of values, remap to avoid wrapping</span></div>
<div class="line"><span class="lineno"> 1117</span>   }</div>
<div class="line"><span class="lineno"> 1118</span> </div>
<div class="line"><span class="lineno"> 1119</span>    <span class="comment">//      hi4 = index &gt;&gt; 4;</span></div>
<div class="line"><span class="lineno"> 1120</span>    uint8_t hi4 = <a class="code hl_function" href="../../da/d2d/colorutils_8cpp.html#ab445fd8641e95a3bbd1417d9783f6170">lsrX4</a>(index);</div>
<div class="line"><span class="lineno"> 1121</span>    uint8_t lo4 = index &amp; 0x0F;</div>
<div class="line"><span class="lineno"> 1122</span> </div>
<div class="line"><span class="lineno"> 1123</span>    <span class="comment">//  CRGB rgb1 = pal[ hi4];</span></div>
<div class="line"><span class="lineno"> 1124</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>* entry = &amp;(pal[0]) + hi4;</div>
<div class="line"><span class="lineno"> 1125</span> </div>
<div class="line"><span class="lineno"> 1126</span>    uint8_t hue1   = entry-&gt;hue;</div>
<div class="line"><span class="lineno"> 1127</span>    uint8_t sat1   = entry-&gt;sat;</div>
<div class="line"><span class="lineno"> 1128</span>    uint8_t val1   = entry-&gt;val;</div>
<div class="line"><span class="lineno"> 1129</span> </div>
<div class="line"><span class="lineno"> 1130</span>    uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = lo4 &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno"> 1131</span> </div>
<div class="line"><span class="lineno"> 1132</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> ) {</div>
<div class="line"><span class="lineno"> 1133</span> </div>
<div class="line"><span class="lineno"> 1134</span>        <span class="keywordflow">if</span>( hi4 == 15 ) {</div>
<div class="line"><span class="lineno"> 1135</span>            entry = &amp;(pal[0]);</div>
<div class="line"><span class="lineno"> 1136</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1137</span>            ++entry;</div>
<div class="line"><span class="lineno"> 1138</span>        }</div>
<div class="line"><span class="lineno"> 1139</span> </div>
<div class="line"><span class="lineno"> 1140</span>        uint8_t f2 = lo4 &lt;&lt; 4;</div>
<div class="line"><span class="lineno"> 1141</span>        uint8_t f1 = 255 - f2;</div>
<div class="line"><span class="lineno"> 1142</span> </div>
<div class="line"><span class="lineno"> 1143</span>        uint8_t hue2  = entry-&gt;hue;</div>
<div class="line"><span class="lineno"> 1144</span>        uint8_t sat2  = entry-&gt;sat;</div>
<div class="line"><span class="lineno"> 1145</span>        uint8_t val2  = entry-&gt;val;</div>
<div class="line"><span class="lineno"> 1146</span> </div>
<div class="line"><span class="lineno"> 1147</span>        <span class="comment">// Now some special casing for blending to or from</span></div>
<div class="line"><span class="lineno"> 1148</span>        <span class="comment">// either black or white.  Black and white don&#39;t have</span></div>
<div class="line"><span class="lineno"> 1149</span>        <span class="comment">// proper &#39;hue&#39; of their own, so when ramping from</span></div>
<div class="line"><span class="lineno"> 1150</span>        <span class="comment">// something else to/from black/white, we set the &#39;hue&#39;</span></div>
<div class="line"><span class="lineno"> 1151</span>        <span class="comment">// of the black/white color to be the same as the hue</span></div>
<div class="line"><span class="lineno"> 1152</span>        <span class="comment">// of the other color, so that you get the expected</span></div>
<div class="line"><span class="lineno"> 1153</span>        <span class="comment">// brightness or saturation ramp, with hue staying</span></div>
<div class="line"><span class="lineno"> 1154</span>        <span class="comment">// constant:</span></div>
<div class="line"><span class="lineno"> 1155</span> </div>
<div class="line"><span class="lineno"> 1156</span>        <span class="comment">// If we are starting from white (sat=0)</span></div>
<div class="line"><span class="lineno"> 1157</span>        <span class="comment">// or black (val=0), adopt the target hue.</span></div>
<div class="line"><span class="lineno"> 1158</span>        <span class="keywordflow">if</span>( sat1 == 0 || val1 == 0) {</div>
<div class="line"><span class="lineno"> 1159</span>            hue1 = hue2;</div>
<div class="line"><span class="lineno"> 1160</span>        }</div>
<div class="line"><span class="lineno"> 1161</span> </div>
<div class="line"><span class="lineno"> 1162</span>        <span class="comment">// If we are ending at white (sat=0)</span></div>
<div class="line"><span class="lineno"> 1163</span>        <span class="comment">// or black (val=0), adopt the starting hue.</span></div>
<div class="line"><span class="lineno"> 1164</span>        <span class="keywordflow">if</span>( sat2 == 0 || val2 == 0) {</div>
<div class="line"><span class="lineno"> 1165</span>            hue2 = hue1;</div>
<div class="line"><span class="lineno"> 1166</span>        }</div>
<div class="line"><span class="lineno"> 1167</span> </div>
<div class="line"><span class="lineno"> 1168</span> </div>
<div class="line"><span class="lineno"> 1169</span>        sat1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( sat1, f1);</div>
<div class="line"><span class="lineno"> 1170</span>        val1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( val1, f1);</div>
<div class="line"><span class="lineno"> 1171</span> </div>
<div class="line"><span class="lineno"> 1172</span>        sat2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( sat2, f2);</div>
<div class="line"><span class="lineno"> 1173</span>        val2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( val2, f2);</div>
<div class="line"><span class="lineno"> 1174</span> </div>
<div class="line"><span class="lineno"> 1175</span>        <span class="comment">//    cleanup_R1();</span></div>
<div class="line"><span class="lineno"> 1176</span> </div>
<div class="line"><span class="lineno"> 1177</span>        <span class="comment">// These sums can&#39;t overflow, so no qadd8 needed.</span></div>
<div class="line"><span class="lineno"> 1178</span>        sat1  += sat2;</div>
<div class="line"><span class="lineno"> 1179</span>        val1  += val2;</div>
<div class="line"><span class="lineno"> 1180</span> </div>
<div class="line"><span class="lineno"> 1181</span>        uint8_t deltaHue = (uint8_t)(hue2 - hue1);</div>
<div class="line"><span class="lineno"> 1182</span>        <span class="keywordflow">if</span>( deltaHue &amp; 0x80 ) {</div>
<div class="line"><span class="lineno"> 1183</span>          <span class="comment">// go backwards</span></div>
<div class="line"><span class="lineno"> 1184</span>          hue1 -= <a class="code hl_function" href="../../d0/da8/group___scaling.html#gad7535ccda9c92470c4e6ee0265585555">scale8</a>( 256 - deltaHue, f2);</div>
<div class="line"><span class="lineno"> 1185</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1186</span>          <span class="comment">// go forwards</span></div>
<div class="line"><span class="lineno"> 1187</span>          hue1 += <a class="code hl_function" href="../../d0/da8/group___scaling.html#gad7535ccda9c92470c4e6ee0265585555">scale8</a>( deltaHue, f2);</div>
<div class="line"><span class="lineno"> 1188</span>        }</div>
<div class="line"><span class="lineno"> 1189</span> </div>
<div class="line"><span class="lineno"> 1190</span>        <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno"> 1191</span>    }</div>
<div class="line"><span class="lineno"> 1192</span> </div>
<div class="line"><span class="lineno"> 1193</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno"> 1194</span>        val1 = <a class="code hl_function" href="../../d0/da8/group___scaling.html#ga628b417ea1507e3447cdf5f308d9b6d5">scale8_video</a>( val1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1195</span>    }</div>
<div class="line"><span class="lineno"> 1196</span> </div>
<div class="line"><span class="lineno"> 1197</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>( hue1, sat1, val1);</div>
<div class="line"><span class="lineno"> 1198</span>}</div>
<div class="ttc" id="a_fx_animartrix_8ino_html_aad82f6f7577fe4fbd31a5bd033ec4638"><div class="ttname"><a href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a></div><div class="ttdeci">UISlider brightness(&quot;Brightness&quot;, 255, 0, 255)</div></div>
<div class="ttc" id="acolorutils_8cpp_html_ab445fd8641e95a3bbd1417d9783f6170"><div class="ttname"><a href="../../da/d2d/colorutils_8cpp.html#ab445fd8641e95a3bbd1417d9783f6170">lsrX4</a></div><div class="ttdeci">uint8_t lsrX4(uint8_t dividend)</div><div class="ttdoc">Helper function to divide a number by 16, aka four logical shift right (LSR)'s.</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2d/colorutils_8cpp_source.html#l00586">colorutils.cpp:586</a></div></div>
<div class="ttc" id="agroup___color_blends_html_ga4f06b4423f71f77346aaf5dabe7dd05c"><div class="ttname"><a href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a></div><div class="ttdeci">CRGB blend(const CRGB &amp;p1, const CRGB &amp;p2, fract8 amountOfP2)</div><div class="ttdoc">Computes a new color blended some fraction of the way between two other colors.</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2d/colorutils_8cpp_source.html#l00347">colorutils.cpp:347</a></div></div>
<div class="ttc" id="agroup___linear_interpolation_html_gaf65357c7aeca9778e5a2f80a6bac2b5d"><div class="ttname"><a href="../../d6/d19/group___linear_interpolation.html#gaf65357c7aeca9778e5a2f80a6bac2b5d">map8</a></div><div class="ttdeci">LIB8STATIC uint8_t map8(uint8_t in, uint8_t rangeStart, uint8_t rangeEnd)</div><div class="ttdoc">Map from one full-range 8-bit value into a narrower range of 8-bit values, possibly a range of hues.</div><div class="ttdef"><b>Definition</b> <a href="../../df/da5/lib8tion_8h_source.html#l00559">lib8tion.h:559</a></div></div>
<div class="ttc" id="agroup___pixel_types_html_dc/d53/struct_c_h_s_v"><div class="ttname"><a href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a></div><div class="ttdoc">Representation of an HSV pixel (hue, saturation, value (aka brightness)).</div><div class="ttdef"><b>Definition</b> <a href="../../d8/dd0/chsv_8h_source.html#l00016">chsv.h:16</a></div></div>
<div class="ttc" id="agroup___scaling_dirty_html_ga3fade00fb4cf5b937b973128198a7a79"><div class="ttname"><a href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a></div><div class="ttdeci">LIB8STATIC_ALWAYS_INLINE void cleanup_R1()</div><div class="ttdoc">Clean up the r1 register after a series of *LEAVING_R1_DIRTY calls.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d91/scale8_8h_source.html#l00333">scale8.h:333</a></div></div>
<div class="ttc" id="agroup___scaling_dirty_html_ga7386235cada3aca429b189681d2ec56d"><div class="ttname"><a href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a></div><div class="ttdeci">LIB8STATIC_ALWAYS_INLINE uint8_t scale8_LEAVING_R1_DIRTY(uint8_t i, fract8 scale)</div><div class="ttdoc">This version of scale8() does not clean up the R1 register on AVR.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d91/scale8_8h_source.html#l00170">scale8.h:170</a></div></div>
<div class="ttc" id="agroup___scaling_html_ga628b417ea1507e3447cdf5f308d9b6d5"><div class="ttname"><a href="../../d0/da8/group___scaling.html#ga628b417ea1507e3447cdf5f308d9b6d5">scale8_video</a></div><div class="ttdeci">LIB8STATIC_ALWAYS_INLINE uint8_t scale8_video(uint8_t i, fract8 scale)</div><div class="ttdoc">The &quot;video&quot; version of scale8() guarantees that the output will be only be zero if one or both of the...</div><div class="ttdef"><b>Definition</b> <a href="../../db/d91/scale8_8h_source.html#l00117">scale8.h:117</a></div></div>
<div class="ttc" id="agroup___scaling_html_gad7535ccda9c92470c4e6ee0265585555"><div class="ttname"><a href="../../d0/da8/group___scaling.html#gad7535ccda9c92470c4e6ee0265585555">scale8</a></div><div class="ttdeci">LIB8STATIC_ALWAYS_INLINE uint8_t scale8(uint8_t i, fract8 scale)</div><div class="ttdoc">Scale one byte by a second one, which is treated as the numerator of a fraction whose denominator is ...</div><div class="ttdef"><b>Definition</b> <a href="../../db/d91/scale8_8h_source.html#l00034">scale8.h:34</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01994">LINEARBLEND_NOWRAP</a>, <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00586">lsrX4()</a>, <a class="el" href="../../df/da5/lib8tion_8h_source.html#l00559">map8()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00034">scale8()</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00117">scale8_video()</a>.</p>
<div id="dynsection-1" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-1-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-1-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-1-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 1 --></div>
</div>

</div>
</div>
<a id="ga79c94ea554455e72eabab172cc15456f" name="ga79c94ea554455e72eabab172cc15456f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga79c94ea554455e72eabab172cc15456f">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[2/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#d5/db4/class_c_h_s_v_palette256">CHSVPalette256</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette.    </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND)    </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01294">1294</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1295</span>{</div>
<div class="line"><span class="lineno"> 1296</span>    <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a> hsv = *( &amp;(pal[0]) + index );</div>
<div class="line"><span class="lineno"> 1297</span> </div>
<div class="line"><span class="lineno"> 1298</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno"> 1299</span>        hsv.value = <a class="code hl_function" href="../../d0/da8/group___scaling.html#ga628b417ea1507e3447cdf5f308d9b6d5">scale8_video</a>( hsv.value, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1300</span>    }</div>
<div class="line"><span class="lineno"> 1301</span> </div>
<div class="line"><span class="lineno"> 1302</span>    <span class="keywordflow">return</span> hsv;</div>
<div class="line"><span class="lineno"> 1303</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00117">scale8_video()</a>.</p>
<div id="dynsection-2" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-2-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-2-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-2-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 2 --></div>
</div>

</div>
</div>
<a id="ga1684ed7eb860c68a915d03e94250e58a" name="ga1684ed7eb860c68a915d03e94250e58a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga1684ed7eb860c68a915d03e94250e58a">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[3/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#da/dbb/class_c_h_s_v_palette32">CHSVPalette32</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette.    </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND)    </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01201">1201</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1202</span>{</div>
<div class="line"><span class="lineno"> 1203</span>   <span class="keywordflow">if</span> ( blendType == <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a>) {</div>
<div class="line"><span class="lineno"> 1204</span>     index = <a class="code hl_function" href="../../d6/d19/group___linear_interpolation.html#gaf65357c7aeca9778e5a2f80a6bac2b5d">map8</a>(index, 0, 247);  <span class="comment">// Blend range is affected by lo3 blend of values, remap to avoid wrapping</span></div>
<div class="line"><span class="lineno"> 1205</span>   }</div>
<div class="line"><span class="lineno"> 1206</span> </div>
<div class="line"><span class="lineno"> 1207</span>    uint8_t hi5 = index;</div>
<div class="line"><span class="lineno"> 1208</span><span class="preprocessor">#if defined(__AVR__)</span></div>
<div class="line"><span class="lineno"> 1209</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno"> 1210</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno"> 1211</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno"> 1212</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno"> 1213</span>    hi5 &gt;&gt;= 3;</div>
<div class="line"><span class="lineno"> 1214</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1215</span>    uint8_t lo3 = index &amp; 0x07;</div>
<div class="line"><span class="lineno"> 1216</span>    </div>
<div class="line"><span class="lineno"> 1217</span>    uint8_t hi5XsizeofCHSV = hi5 * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>);</div>
<div class="line"><span class="lineno"> 1218</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>* entry = (<a class="code hl_struct" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>*)( (uint8_t*)(&amp;(pal[0])) + hi5XsizeofCHSV);</div>
<div class="line"><span class="lineno"> 1219</span>    </div>
<div class="line"><span class="lineno"> 1220</span>    uint8_t hue1   = entry-&gt;hue;</div>
<div class="line"><span class="lineno"> 1221</span>    uint8_t sat1   = entry-&gt;sat;</div>
<div class="line"><span class="lineno"> 1222</span>    uint8_t val1   = entry-&gt;val;</div>
<div class="line"><span class="lineno"> 1223</span>    </div>
<div class="line"><span class="lineno"> 1224</span>    uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = lo3 &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno"> 1225</span>    </div>
<div class="line"><span class="lineno"> 1226</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> ) {</div>
<div class="line"><span class="lineno"> 1227</span>        </div>
<div class="line"><span class="lineno"> 1228</span>        <span class="keywordflow">if</span>( hi5 == 31 ) {</div>
<div class="line"><span class="lineno"> 1229</span>            entry = &amp;(pal[0]);</div>
<div class="line"><span class="lineno"> 1230</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1231</span>            ++entry;</div>
<div class="line"><span class="lineno"> 1232</span>        }</div>
<div class="line"><span class="lineno"> 1233</span>        </div>
<div class="line"><span class="lineno"> 1234</span>        uint8_t f2 = lo3 &lt;&lt; 5;</div>
<div class="line"><span class="lineno"> 1235</span>        uint8_t f1 = 255 - f2;</div>
<div class="line"><span class="lineno"> 1236</span>        </div>
<div class="line"><span class="lineno"> 1237</span>        uint8_t hue2  = entry-&gt;hue;</div>
<div class="line"><span class="lineno"> 1238</span>        uint8_t sat2  = entry-&gt;sat;</div>
<div class="line"><span class="lineno"> 1239</span>        uint8_t val2  = entry-&gt;val;</div>
<div class="line"><span class="lineno"> 1240</span>        </div>
<div class="line"><span class="lineno"> 1241</span>        <span class="comment">// Now some special casing for blending to or from</span></div>
<div class="line"><span class="lineno"> 1242</span>        <span class="comment">// either black or white.  Black and white don&#39;t have</span></div>
<div class="line"><span class="lineno"> 1243</span>        <span class="comment">// proper &#39;hue&#39; of their own, so when ramping from</span></div>
<div class="line"><span class="lineno"> 1244</span>        <span class="comment">// something else to/from black/white, we set the &#39;hue&#39;</span></div>
<div class="line"><span class="lineno"> 1245</span>        <span class="comment">// of the black/white color to be the same as the hue</span></div>
<div class="line"><span class="lineno"> 1246</span>        <span class="comment">// of the other color, so that you get the expected</span></div>
<div class="line"><span class="lineno"> 1247</span>        <span class="comment">// brightness or saturation ramp, with hue staying</span></div>
<div class="line"><span class="lineno"> 1248</span>        <span class="comment">// constant:</span></div>
<div class="line"><span class="lineno"> 1249</span>        </div>
<div class="line"><span class="lineno"> 1250</span>        <span class="comment">// If we are starting from white (sat=0)</span></div>
<div class="line"><span class="lineno"> 1251</span>        <span class="comment">// or black (val=0), adopt the target hue.</span></div>
<div class="line"><span class="lineno"> 1252</span>        <span class="keywordflow">if</span>( sat1 == 0 || val1 == 0) {</div>
<div class="line"><span class="lineno"> 1253</span>            hue1 = hue2;</div>
<div class="line"><span class="lineno"> 1254</span>        }</div>
<div class="line"><span class="lineno"> 1255</span>        </div>
<div class="line"><span class="lineno"> 1256</span>        <span class="comment">// If we are ending at white (sat=0)</span></div>
<div class="line"><span class="lineno"> 1257</span>        <span class="comment">// or black (val=0), adopt the starting hue.</span></div>
<div class="line"><span class="lineno"> 1258</span>        <span class="keywordflow">if</span>( sat2 == 0 || val2 == 0) {</div>
<div class="line"><span class="lineno"> 1259</span>            hue2 = hue1;</div>
<div class="line"><span class="lineno"> 1260</span>        }</div>
<div class="line"><span class="lineno"> 1261</span>        </div>
<div class="line"><span class="lineno"> 1262</span>        </div>
<div class="line"><span class="lineno"> 1263</span>        sat1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( sat1, f1);</div>
<div class="line"><span class="lineno"> 1264</span>        val1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( val1, f1);</div>
<div class="line"><span class="lineno"> 1265</span>        </div>
<div class="line"><span class="lineno"> 1266</span>        sat2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( sat2, f2);</div>
<div class="line"><span class="lineno"> 1267</span>        val2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( val2, f2);</div>
<div class="line"><span class="lineno"> 1268</span>        </div>
<div class="line"><span class="lineno"> 1269</span>        <span class="comment">//    cleanup_R1();</span></div>
<div class="line"><span class="lineno"> 1270</span>        </div>
<div class="line"><span class="lineno"> 1271</span>        <span class="comment">// These sums can&#39;t overflow, so no qadd8 needed.</span></div>
<div class="line"><span class="lineno"> 1272</span>        sat1  += sat2;</div>
<div class="line"><span class="lineno"> 1273</span>        val1  += val2;</div>
<div class="line"><span class="lineno"> 1274</span>        </div>
<div class="line"><span class="lineno"> 1275</span>        uint8_t deltaHue = (uint8_t)(hue2 - hue1);</div>
<div class="line"><span class="lineno"> 1276</span>        <span class="keywordflow">if</span>( deltaHue &amp; 0x80 ) {</div>
<div class="line"><span class="lineno"> 1277</span>            <span class="comment">// go backwards</span></div>
<div class="line"><span class="lineno"> 1278</span>            hue1 -= <a class="code hl_function" href="../../d0/da8/group___scaling.html#gad7535ccda9c92470c4e6ee0265585555">scale8</a>( 256 - deltaHue, f2);</div>
<div class="line"><span class="lineno"> 1279</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1280</span>            <span class="comment">// go forwards</span></div>
<div class="line"><span class="lineno"> 1281</span>            hue1 += <a class="code hl_function" href="../../d0/da8/group___scaling.html#gad7535ccda9c92470c4e6ee0265585555">scale8</a>( deltaHue, f2);</div>
<div class="line"><span class="lineno"> 1282</span>        }</div>
<div class="line"><span class="lineno"> 1283</span>        </div>
<div class="line"><span class="lineno"> 1284</span>        <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno"> 1285</span>    }</div>
<div class="line"><span class="lineno"> 1286</span>    </div>
<div class="line"><span class="lineno"> 1287</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno"> 1288</span>        val1 = <a class="code hl_function" href="../../d0/da8/group___scaling.html#ga628b417ea1507e3447cdf5f308d9b6d5">scale8_video</a>( val1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1289</span>    }</div>
<div class="line"><span class="lineno"> 1290</span>    </div>
<div class="line"><span class="lineno"> 1291</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#dc/d53/struct_c_h_s_v">CHSV</a>( hue1, sat1, val1);</div>
<div class="line"><span class="lineno"> 1292</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01994">LINEARBLEND_NOWRAP</a>, <a class="el" href="../../df/da5/lib8tion_8h_source.html#l00559">map8()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00034">scale8()</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00117">scale8_video()</a>.</p>
<div id="dynsection-3" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-3-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-3-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-3-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 3 --></div>
</div>

</div>
</div>
<a id="gac46e65aff3dd6519b33e27f0998f17cd" name="gac46e65aff3dd6519b33e27f0998f17cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac46e65aff3dd6519b33e27f0998f17cd">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[4/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette. </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00644">644</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  645</span>{</div>
<div class="line"><span class="lineno">  646</span>   <span class="keywordflow">if</span> ( blendType == <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a>) {</div>
<div class="line"><span class="lineno">  647</span>     index = <a class="code hl_function" href="../../d6/d19/group___linear_interpolation.html#gaf65357c7aeca9778e5a2f80a6bac2b5d">map8</a>(index, 0, 239);  <span class="comment">// Blend range is affected by lo4 blend of values, remap to avoid wrapping</span></div>
<div class="line"><span class="lineno">  648</span>   }</div>
<div class="line"><span class="lineno">  649</span> </div>
<div class="line"><span class="lineno">  650</span>    <span class="comment">//      hi4 = index &gt;&gt; 4;</span></div>
<div class="line"><span class="lineno">  651</span>    uint8_t hi4 = <a class="code hl_function" href="../../da/d2d/colorutils_8cpp.html#ab445fd8641e95a3bbd1417d9783f6170">lsrX4</a>(index);</div>
<div class="line"><span class="lineno">  652</span>    uint8_t lo4 = index &amp; 0x0F;</div>
<div class="line"><span class="lineno">  653</span>    </div>
<div class="line"><span class="lineno">  654</span>    <span class="comment">// const CRGB* entry = &amp;(pal[0]) + hi4;</span></div>
<div class="line"><span class="lineno">  655</span>    <span class="comment">// since hi4 is always 0..15, hi4 * sizeof(CRGB) can be a single-byte value,</span></div>
<div class="line"><span class="lineno">  656</span>    <span class="comment">// instead of the two byte &#39;int&#39; that avr-gcc defaults to.</span></div>
<div class="line"><span class="lineno">  657</span>    <span class="comment">// So, we multiply hi4 X sizeof(CRGB), giving hi4XsizeofCRGB;</span></div>
<div class="line"><span class="lineno">  658</span>    uint8_t hi4XsizeofCRGB = hi4 * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>);</div>
<div class="line"><span class="lineno">  659</span>    <span class="comment">// We then add that to a base array pointer.</span></div>
<div class="line"><span class="lineno">  660</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>* entry = (<a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>*)( (uint8_t*)(&amp;(pal[0])) + hi4XsizeofCRGB);</div>
<div class="line"><span class="lineno">  661</span>    </div>
<div class="line"><span class="lineno">  662</span>    uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = lo4 &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno">  663</span>    </div>
<div class="line"><span class="lineno">  664</span>    uint8_t red1   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  665</span>    uint8_t green1 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  666</span>    uint8_t blue1  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  667</span>    </div>
<div class="line"><span class="lineno">  668</span>    </div>
<div class="line"><span class="lineno">  669</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> ) {</div>
<div class="line"><span class="lineno">  670</span>        </div>
<div class="line"><span class="lineno">  671</span>        <span class="keywordflow">if</span>( hi4 == 15 ) {</div>
<div class="line"><span class="lineno">  672</span>            entry = &amp;(pal[0]);</div>
<div class="line"><span class="lineno">  673</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  674</span>            ++entry;</div>
<div class="line"><span class="lineno">  675</span>        }</div>
<div class="line"><span class="lineno">  676</span>        </div>
<div class="line"><span class="lineno">  677</span>        uint8_t f2 = lo4 &lt;&lt; 4;</div>
<div class="line"><span class="lineno">  678</span>        uint8_t f1 = 255 - f2;</div>
<div class="line"><span class="lineno">  679</span>        </div>
<div class="line"><span class="lineno">  680</span>        <span class="comment">//    rgb1.nscale8(f1);</span></div>
<div class="line"><span class="lineno">  681</span>        uint8_t red2   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  682</span>        red1   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1,   f1);</div>
<div class="line"><span class="lineno">  683</span>        red2   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red2,   f2);</div>
<div class="line"><span class="lineno">  684</span>        red1   += red2;</div>
<div class="line"><span class="lineno">  685</span> </div>
<div class="line"><span class="lineno">  686</span>        uint8_t green2 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  687</span>        green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, f1);</div>
<div class="line"><span class="lineno">  688</span>        green2 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green2, f2);</div>
<div class="line"><span class="lineno">  689</span>        green1 += green2;</div>
<div class="line"><span class="lineno">  690</span> </div>
<div class="line"><span class="lineno">  691</span>        uint8_t blue2  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  692</span>        blue1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1,  f1);</div>
<div class="line"><span class="lineno">  693</span>        blue2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue2,  f2);</div>
<div class="line"><span class="lineno">  694</span>        blue1  += blue2;</div>
<div class="line"><span class="lineno">  695</span>        </div>
<div class="line"><span class="lineno">  696</span>        <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  697</span>    }</div>
<div class="line"><span class="lineno">  698</span>    </div>
<div class="line"><span class="lineno">  699</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno">  700</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> ) {</div>
<div class="line"><span class="lineno">  701</span>            ++<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>; <span class="comment">// adjust for rounding</span></div>
<div class="line"><span class="lineno">  702</span>            <span class="comment">// Now, since brightness is nonzero, we don&#39;t need the full scale8_video logic;</span></div>
<div class="line"><span class="lineno">  703</span>            <span class="comment">// we can just to scale8 and then add one (unless scale8 fixed) to all nonzero inputs.</span></div>
<div class="line"><span class="lineno">  704</span>            <span class="keywordflow">if</span>( red1 )   {</div>
<div class="line"><span class="lineno">  705</span>                red1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  706</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  707</span>                ++red1;</div>
<div class="line"><span class="lineno">  708</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  709</span>            }</div>
<div class="line"><span class="lineno">  710</span>            <span class="keywordflow">if</span>( green1 ) {</div>
<div class="line"><span class="lineno">  711</span>                green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  712</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  713</span>                ++green1;</div>
<div class="line"><span class="lineno">  714</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  715</span>            }</div>
<div class="line"><span class="lineno">  716</span>            <span class="keywordflow">if</span>( blue1 )  {</div>
<div class="line"><span class="lineno">  717</span>                blue1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  718</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  719</span>                ++blue1;</div>
<div class="line"><span class="lineno">  720</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  721</span>            }</div>
<div class="line"><span class="lineno">  722</span>            <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  723</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  724</span>            red1 = 0;</div>
<div class="line"><span class="lineno">  725</span>            green1 = 0;</div>
<div class="line"><span class="lineno">  726</span>            blue1 = 0;</div>
<div class="line"><span class="lineno">  727</span>        }</div>
<div class="line"><span class="lineno">  728</span>    }</div>
<div class="line"><span class="lineno">  729</span>    </div>
<div class="line"><span class="lineno">  730</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>( red1, green1, blue1);</div>
<div class="line"><span class="lineno">  731</span>}</div>
<div class="ttc" id="agroup___pixel_types_html_d7/d82/struct_c_r_g_b"><div class="ttname"><a href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a></div><div class="ttdoc">Representation of an RGB pixel (Red, Green, Blue)</div><div class="ttdef"><b>Definition</b> <a href="../../db/dd1/crgb_8h_source.html#l00054">crgb.h:54</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01994">LINEARBLEND_NOWRAP</a>, <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00586">lsrX4()</a>, <a class="el" href="../../df/da5/lib8tion_8h_source.html#l00559">map8()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d5/d25/_demo_reel100_8ino_source.html#l00105">bpm()</a>, <a class="el" href="../../d4/dc0/demoreel100_8h_source.html#l00112">fl::DemoReel100::bpm()</a>, <a class="el" href="../../d4/dd0/_twinkle_fox_8ino_source.html#l00221">computeOneTwinkle()</a>, <a class="el" href="../../d1/df6/twinklefox_8h_source.html#l00191">fl::TwinkleFox::computeOneTwinkle()</a>, <a class="el" href="../../d5/dcb/fire2012_8h_source.html#l00061">fl::Fire2012::draw()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l02094">fill_palette()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l02117">fill_palette_circular()</a>, <a class="el" href="../../d1/dc5/_color_palette_8ino_source.html#l00076">FillLEDsFromPaletteColors()</a>, <a class="el" href="../../db/d92/_fire2012_with_palette_8ino_source.html#l00060">Fire2012WithPalette()</a>, <a class="el" href="../../d8/d2c/_fire2023_8ino_source.html#l00127">Fire2023()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l02152">map_data_into_colors_through_palette()</a>, <a class="el" href="../../d6/d66/noisepalette_8cpp_source.html#l00109">fl::NoisePalette::mapNoiseToLEDsUsingPalette()</a>, <a class="el" href="../../da/dda/_noise_plus_palette_8ino_source.html#l00148">mapNoiseToLEDsUsingPalette()</a>, <a class="el" href="../../dc/d70/pacifica_8h_source.html#l00090">fl::Pacifica::pacifica_one_layer()</a>, <a class="el" href="../../dc/d25/_pacifica_8ino_source.html#l00113">pacifica_one_layer()</a>, <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01313">UpscalePalette()</a>, <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01346">UpscalePalette()</a>, <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01306">UpscalePalette()</a>, and <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01339">UpscalePalette()</a>.</p>
<div id="dynsection-4" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-4-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-4-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-4-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 4 --></div>
</div>
<div id="dynsection-5" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-5-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-5-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-5-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 5 --></div>
</div>

</div>
</div>
<a id="gaf65fa1b4fedbbd7b8054a71e1b6474b3" name="gaf65fa1b4fedbbd7b8054a71e1b6474b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf65fa1b4fedbbd7b8054a71e1b6474b3">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[5/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#de/d34/class_c_r_g_b_palette256">CRGBPalette256</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette.    </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND)    </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01046">1046</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1047</span>{</div>
<div class="line"><span class="lineno"> 1048</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>* entry = &amp;(pal[0]) + index;</div>
<div class="line"><span class="lineno"> 1049</span> </div>
<div class="line"><span class="lineno"> 1050</span>    uint8_t red   = entry-&gt;red;</div>
<div class="line"><span class="lineno"> 1051</span>    uint8_t green = entry-&gt;green;</div>
<div class="line"><span class="lineno"> 1052</span>    uint8_t blue  = entry-&gt;blue;</div>
<div class="line"><span class="lineno"> 1053</span> </div>
<div class="line"><span class="lineno"> 1054</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno"> 1055</span>        ++<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>; <span class="comment">// adjust for rounding</span></div>
<div class="line"><span class="lineno"> 1056</span>        red   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#gaf8e0821f34434cd6bfed4a16a895da23">scale8_video_LEAVING_R1_DIRTY</a>( red,   <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1057</span>        green = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#gaf8e0821f34434cd6bfed4a16a895da23">scale8_video_LEAVING_R1_DIRTY</a>( green, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1058</span>        blue  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#gaf8e0821f34434cd6bfed4a16a895da23">scale8_video_LEAVING_R1_DIRTY</a>( blue,  <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1059</span>        <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno"> 1060</span>    }</div>
<div class="line"><span class="lineno"> 1061</span> </div>
<div class="line"><span class="lineno"> 1062</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>( red, green, blue);</div>
<div class="line"><span class="lineno"> 1063</span>}</div>
<div class="ttc" id="agroup___scaling_dirty_html_gaf8e0821f34434cd6bfed4a16a895da23"><div class="ttname"><a href="../../d0/da5/group___scaling_dirty.html#gaf8e0821f34434cd6bfed4a16a895da23">scale8_video_LEAVING_R1_DIRTY</a></div><div class="ttdeci">LIB8STATIC_ALWAYS_INLINE uint8_t scale8_video_LEAVING_R1_DIRTY(uint8_t i, fract8 scale)</div><div class="ttdoc">This version of scale8_video() does not clean up the R1 register on AVR.</div><div class="ttdef"><b>Definition</b> <a href="../../db/d91/scale8_8h_source.html#l00262">scale8.h:262</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00262">scale8_video_LEAVING_R1_DIRTY()</a>.</p>
<div id="dynsection-6" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-6-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-6-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-6-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 6 --></div>
</div>

</div>
</div>
<a id="gae5e137a13a4b6145fe40007328d398f4" name="gae5e137a13a4b6145fe40007328d398f4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gae5e137a13a4b6145fe40007328d398f4">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[6/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#df/d3d/class_c_r_g_b_palette32">CRGBPalette32</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette.    </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND)    </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00862">862</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  863</span>{</div>
<div class="line"><span class="lineno">  864</span>   <span class="keywordflow">if</span> ( blendType == <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a>) {</div>
<div class="line"><span class="lineno">  865</span>     index = <a class="code hl_function" href="../../d6/d19/group___linear_interpolation.html#gaf65357c7aeca9778e5a2f80a6bac2b5d">map8</a>(index, 0, 247);  <span class="comment">// Blend range is affected by lo3 blend of values, remap to avoid wrapping</span></div>
<div class="line"><span class="lineno">  866</span>   }</div>
<div class="line"><span class="lineno">  867</span> </div>
<div class="line"><span class="lineno">  868</span>    uint8_t hi5 = index;</div>
<div class="line"><span class="lineno">  869</span><span class="preprocessor">#if defined(__AVR__)</span></div>
<div class="line"><span class="lineno">  870</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno">  871</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno">  872</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno">  873</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  874</span>    hi5 &gt;&gt;= 3;</div>
<div class="line"><span class="lineno">  875</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  876</span>    uint8_t lo3 = index &amp; 0x07;</div>
<div class="line"><span class="lineno">  877</span>    </div>
<div class="line"><span class="lineno">  878</span>    <span class="comment">// const CRGB* entry = &amp;(pal[0]) + hi5;</span></div>
<div class="line"><span class="lineno">  879</span>    <span class="comment">// since hi5 is always 0..31, hi4 * sizeof(CRGB) can be a single-byte value,</span></div>
<div class="line"><span class="lineno">  880</span>    <span class="comment">// instead of the two byte &#39;int&#39; that avr-gcc defaults to.</span></div>
<div class="line"><span class="lineno">  881</span>    <span class="comment">// So, we multiply hi5 X sizeof(CRGB), giving hi5XsizeofCRGB;</span></div>
<div class="line"><span class="lineno">  882</span>    uint8_t hi5XsizeofCRGB = hi5 * <span class="keyword">sizeof</span>(<a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>);</div>
<div class="line"><span class="lineno">  883</span>    <span class="comment">// We then add that to a base array pointer.</span></div>
<div class="line"><span class="lineno">  884</span>    <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>* entry = (<a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>*)( (uint8_t*)(&amp;(pal[0])) + hi5XsizeofCRGB);</div>
<div class="line"><span class="lineno">  885</span>    </div>
<div class="line"><span class="lineno">  886</span>    uint8_t red1   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  887</span>    uint8_t green1 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  888</span>    uint8_t blue1  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  889</span>    </div>
<div class="line"><span class="lineno">  890</span>    uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = lo3 &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno">  891</span>    </div>
<div class="line"><span class="lineno">  892</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> ) {</div>
<div class="line"><span class="lineno">  893</span>        </div>
<div class="line"><span class="lineno">  894</span>        <span class="keywordflow">if</span>( hi5 == 31 ) {</div>
<div class="line"><span class="lineno">  895</span>            entry = &amp;(pal[0]);</div>
<div class="line"><span class="lineno">  896</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  897</span>            ++entry;</div>
<div class="line"><span class="lineno">  898</span>        }</div>
<div class="line"><span class="lineno">  899</span>        </div>
<div class="line"><span class="lineno">  900</span>        uint8_t f2 = lo3 &lt;&lt; 5;</div>
<div class="line"><span class="lineno">  901</span>        uint8_t f1 = 255 - f2;</div>
<div class="line"><span class="lineno">  902</span>        </div>
<div class="line"><span class="lineno">  903</span>        uint8_t red2   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  904</span>        red1   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1,   f1);</div>
<div class="line"><span class="lineno">  905</span>        red2   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red2,   f2);</div>
<div class="line"><span class="lineno">  906</span>        red1   += red2;</div>
<div class="line"><span class="lineno">  907</span>        </div>
<div class="line"><span class="lineno">  908</span>        uint8_t green2 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  909</span>        green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, f1);</div>
<div class="line"><span class="lineno">  910</span>        green2 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green2, f2);</div>
<div class="line"><span class="lineno">  911</span>        green1 += green2;</div>
<div class="line"><span class="lineno">  912</span>        </div>
<div class="line"><span class="lineno">  913</span>        uint8_t blue2  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  914</span>        blue1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1,  f1);</div>
<div class="line"><span class="lineno">  915</span>        blue2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue2,  f2);</div>
<div class="line"><span class="lineno">  916</span>        blue1  += blue2;</div>
<div class="line"><span class="lineno">  917</span> </div>
<div class="line"><span class="lineno">  918</span>        <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  919</span>        </div>
<div class="line"><span class="lineno">  920</span>    }</div>
<div class="line"><span class="lineno">  921</span>    </div>
<div class="line"><span class="lineno">  922</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno">  923</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> ) {</div>
<div class="line"><span class="lineno">  924</span>            ++<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>; <span class="comment">// adjust for rounding</span></div>
<div class="line"><span class="lineno">  925</span>            <span class="comment">// Now, since brightness is nonzero, we don&#39;t need the full scale8_video logic;</span></div>
<div class="line"><span class="lineno">  926</span>            <span class="comment">// we can just to scale8 and then add one (unless scale8 fixed) to all nonzero inputs.</span></div>
<div class="line"><span class="lineno">  927</span>            <span class="keywordflow">if</span>( red1 )   {</div>
<div class="line"><span class="lineno">  928</span>                red1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  929</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  930</span>                ++red1;</div>
<div class="line"><span class="lineno">  931</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  932</span>            }</div>
<div class="line"><span class="lineno">  933</span>            <span class="keywordflow">if</span>( green1 ) {</div>
<div class="line"><span class="lineno">  934</span>                green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  935</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  936</span>                ++green1;</div>
<div class="line"><span class="lineno">  937</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  938</span>            }</div>
<div class="line"><span class="lineno">  939</span>            <span class="keywordflow">if</span>( blue1 )  {</div>
<div class="line"><span class="lineno">  940</span>                blue1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  941</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  942</span>                ++blue1;</div>
<div class="line"><span class="lineno">  943</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  944</span>            }</div>
<div class="line"><span class="lineno">  945</span>            <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  946</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  947</span>            red1 = 0;</div>
<div class="line"><span class="lineno">  948</span>            green1 = 0;</div>
<div class="line"><span class="lineno">  949</span>            blue1 = 0;</div>
<div class="line"><span class="lineno">  950</span>        }</div>
<div class="line"><span class="lineno">  951</span>    }</div>
<div class="line"><span class="lineno">  952</span>    </div>
<div class="line"><span class="lineno">  953</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>( red1, green1, blue1);</div>
<div class="line"><span class="lineno">  954</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01994">LINEARBLEND_NOWRAP</a>, <a class="el" href="../../df/da5/lib8tion_8h_source.html#l00559">map8()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>.</p>
<div id="dynsection-7" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-7-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-7-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-7-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 7 --></div>
</div>

</div>
</div>
<a id="ga0a1bd774cd65ee7b85a20c11212bbd95" name="ga0a1bd774cd65ee7b85a20c11212bbd95"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0a1bd774cd65ee7b85a20c11212bbd95">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[7/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/dfb/colorutils_8h.html#a3ce4f8424098c820a739f95cf86d7663">TProgmemRGBPalette16</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette.    </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND)    </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00779">779</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  780</span>{</div>
<div class="line"><span class="lineno">  781</span>   <span class="keywordflow">if</span> ( blendType == <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a>) {</div>
<div class="line"><span class="lineno">  782</span>     index = <a class="code hl_function" href="../../d6/d19/group___linear_interpolation.html#gaf65357c7aeca9778e5a2f80a6bac2b5d">map8</a>(index, 0, 239);  <span class="comment">// Blend range is affected by lo4 blend of values, remap to avoid wrapping</span></div>
<div class="line"><span class="lineno">  783</span>   }</div>
<div class="line"><span class="lineno">  784</span> </div>
<div class="line"><span class="lineno">  785</span>    <span class="comment">//      hi4 = index &gt;&gt; 4;</span></div>
<div class="line"><span class="lineno">  786</span>    uint8_t hi4 = <a class="code hl_function" href="../../da/d2d/colorutils_8cpp.html#ab445fd8641e95a3bbd1417d9783f6170">lsrX4</a>(index);</div>
<div class="line"><span class="lineno">  787</span>    uint8_t lo4 = index &amp; 0x0F;</div>
<div class="line"><span class="lineno">  788</span> </div>
<div class="line"><span class="lineno">  789</span>    <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> entry(<a class="code hl_define" href="../../df/dab/fastled__progmem_8h.html#ac6a3d8446c38aabc9f0f55196a2eae3c">FL_PGM_READ_DWORD_NEAR</a>( &amp;(pal[0]) + hi4 ));</div>
<div class="line"><span class="lineno">  790</span>    </div>
<div class="line"><span class="lineno">  791</span> </div>
<div class="line"><span class="lineno">  792</span>    uint8_t red1   = entry.red;</div>
<div class="line"><span class="lineno">  793</span>    uint8_t green1 = entry.green;</div>
<div class="line"><span class="lineno">  794</span>    uint8_t blue1  = entry.blue;</div>
<div class="line"><span class="lineno">  795</span> </div>
<div class="line"><span class="lineno">  796</span>    uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = lo4 &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno">  797</span> </div>
<div class="line"><span class="lineno">  798</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> ) {</div>
<div class="line"><span class="lineno">  799</span> </div>
<div class="line"><span class="lineno">  800</span>        <span class="keywordflow">if</span>( hi4 == 15 ) {</div>
<div class="line"><span class="lineno">  801</span>            entry =   <a class="code hl_define" href="../../df/dab/fastled__progmem_8h.html#ac6a3d8446c38aabc9f0f55196a2eae3c">FL_PGM_READ_DWORD_NEAR</a>( &amp;(pal[0]) );</div>
<div class="line"><span class="lineno">  802</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  803</span>            entry =   <a class="code hl_define" href="../../df/dab/fastled__progmem_8h.html#ac6a3d8446c38aabc9f0f55196a2eae3c">FL_PGM_READ_DWORD_NEAR</a>( &amp;(pal[1]) + hi4 );</div>
<div class="line"><span class="lineno">  804</span>        }</div>
<div class="line"><span class="lineno">  805</span> </div>
<div class="line"><span class="lineno">  806</span>        uint8_t f2 = lo4 &lt;&lt; 4;</div>
<div class="line"><span class="lineno">  807</span>        uint8_t f1 = 255 - f2;</div>
<div class="line"><span class="lineno">  808</span> </div>
<div class="line"><span class="lineno">  809</span>        uint8_t red2   = entry.red;</div>
<div class="line"><span class="lineno">  810</span>        red1   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1,   f1);</div>
<div class="line"><span class="lineno">  811</span>        red2   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red2,   f2);</div>
<div class="line"><span class="lineno">  812</span>        red1   += red2;</div>
<div class="line"><span class="lineno">  813</span> </div>
<div class="line"><span class="lineno">  814</span>        uint8_t green2 = entry.green;</div>
<div class="line"><span class="lineno">  815</span>        green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, f1);</div>
<div class="line"><span class="lineno">  816</span>        green2 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green2, f2);</div>
<div class="line"><span class="lineno">  817</span>        green1 += green2;</div>
<div class="line"><span class="lineno">  818</span> </div>
<div class="line"><span class="lineno">  819</span>        uint8_t blue2  = entry.blue;</div>
<div class="line"><span class="lineno">  820</span>        blue1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1,  f1);</div>
<div class="line"><span class="lineno">  821</span>        blue2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue2,  f2);</div>
<div class="line"><span class="lineno">  822</span>        blue1  += blue2;</div>
<div class="line"><span class="lineno">  823</span> </div>
<div class="line"><span class="lineno">  824</span>        <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  825</span>    }</div>
<div class="line"><span class="lineno">  826</span> </div>
<div class="line"><span class="lineno">  827</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno">  828</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> ) {</div>
<div class="line"><span class="lineno">  829</span>            ++<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>; <span class="comment">// adjust for rounding</span></div>
<div class="line"><span class="lineno">  830</span>            <span class="comment">// Now, since brightness is nonzero, we don&#39;t need the full scale8_video logic;</span></div>
<div class="line"><span class="lineno">  831</span>            <span class="comment">// we can just to scale8 and then add one (unless scale8 fixed) to all nonzero inputs.</span></div>
<div class="line"><span class="lineno">  832</span>            <span class="keywordflow">if</span>( red1 )   {</div>
<div class="line"><span class="lineno">  833</span>                red1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  834</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  835</span>                ++red1;</div>
<div class="line"><span class="lineno">  836</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  837</span>            }</div>
<div class="line"><span class="lineno">  838</span>            <span class="keywordflow">if</span>( green1 ) {</div>
<div class="line"><span class="lineno">  839</span>                green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  840</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  841</span>                ++green1;</div>
<div class="line"><span class="lineno">  842</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  843</span>            }</div>
<div class="line"><span class="lineno">  844</span>            <span class="keywordflow">if</span>( blue1 )  {</div>
<div class="line"><span class="lineno">  845</span>                blue1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  846</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno">  847</span>                ++blue1;</div>
<div class="line"><span class="lineno">  848</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  849</span>            }</div>
<div class="line"><span class="lineno">  850</span>            <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  851</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  852</span>            red1 = 0;</div>
<div class="line"><span class="lineno">  853</span>            green1 = 0;</div>
<div class="line"><span class="lineno">  854</span>            blue1 = 0;</div>
<div class="line"><span class="lineno">  855</span>        }</div>
<div class="line"><span class="lineno">  856</span>    }</div>
<div class="line"><span class="lineno">  857</span> </div>
<div class="line"><span class="lineno">  858</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>( red1, green1, blue1);</div>
<div class="line"><span class="lineno">  859</span>}</div>
<div class="ttc" id="afastled__progmem_8h_html_ac6a3d8446c38aabc9f0f55196a2eae3c"><div class="ttname"><a href="../../df/dab/fastled__progmem_8h.html#ac6a3d8446c38aabc9f0f55196a2eae3c">FL_PGM_READ_DWORD_NEAR</a></div><div class="ttdeci">#define FL_PGM_READ_DWORD_NEAR(x)</div><div class="ttdoc">Read a double word (32-bit) from PROGMEM memory.</div><div class="ttdef"><b>Definition</b> <a href="../../df/dab/fastled__progmem_8h_source.html#l00061">fastled_progmem.h:61</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../df/dab/fastled__progmem_8h_source.html#l00061">FL_PGM_READ_DWORD_NEAR</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01994">LINEARBLEND_NOWRAP</a>, <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00586">lsrX4()</a>, <a class="el" href="../../df/da5/lib8tion_8h_source.html#l00559">map8()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>.</p>
<div id="dynsection-8" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-8-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-8-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-8-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 8 --></div>
</div>

</div>
</div>
<a id="gaea6bd3ab3ec62d88e2dcc7ab2486dcd4" name="gaea6bd3ab3ec62d88e2dcc7ab2486dcd4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaea6bd3ab3ec62d88e2dcc7ab2486dcd4">&#9670;&#160;</a></span>ColorFromPalette() <span class="overload">[8/8]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPalette </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d1/dfb/colorutils_8h.html#a0402dc727d6a118cf426da017ff42152">TProgmemRGBPalette32</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get a color from a palette.    </p>
<p>These are the main functions for getting and using palette colors. Regardless of the number of entries in the base palette, this function will interpolate between entries to turn the discrete colors into a smooth gradient. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pal</td><td>the palette to retrieve the color from </td></tr>
    <tr><td class="paramname">index</td><td>the position in the palette to retrieve the color for (0-255) </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND)    </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00957">957</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  958</span>{</div>
<div class="line"><span class="lineno">  959</span>   <span class="keywordflow">if</span> ( blendType == <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea7bca22698a242b60273a072b10848014">LINEARBLEND_NOWRAP</a>) {</div>
<div class="line"><span class="lineno">  960</span>     index = <a class="code hl_function" href="../../d6/d19/group___linear_interpolation.html#gaf65357c7aeca9778e5a2f80a6bac2b5d">map8</a>(index, 0, 247);  <span class="comment">// Blend range is affected by lo3 blend of values, remap to avoid wrapping</span></div>
<div class="line"><span class="lineno">  961</span>   }</div>
<div class="line"><span class="lineno">  962</span> </div>
<div class="line"><span class="lineno">  963</span>    uint8_t hi5 = index;</div>
<div class="line"><span class="lineno">  964</span><span class="preprocessor">#if defined(__AVR__)</span></div>
<div class="line"><span class="lineno">  965</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno">  966</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno">  967</span>    hi5 /= 2;</div>
<div class="line"><span class="lineno">  968</span><span class="preprocessor">#else</span></div>
<div class="line"><span class="lineno">  969</span>    hi5 &gt;&gt;= 3;</div>
<div class="line"><span class="lineno">  970</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno">  971</span>    uint8_t lo3 = index &amp; 0x07;</div>
<div class="line"><span class="lineno">  972</span>    </div>
<div class="line"><span class="lineno">  973</span>    <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> entry(<a class="code hl_define" href="../../df/dab/fastled__progmem_8h.html#ac6a3d8446c38aabc9f0f55196a2eae3c">FL_PGM_READ_DWORD_NEAR</a>( &amp;(pal[0]) + hi5));</div>
<div class="line"><span class="lineno">  974</span>    </div>
<div class="line"><span class="lineno">  975</span>    uint8_t red1   = entry.red;</div>
<div class="line"><span class="lineno">  976</span>    uint8_t green1 = entry.green;</div>
<div class="line"><span class="lineno">  977</span>    uint8_t blue1  = entry.blue;</div>
<div class="line"><span class="lineno">  978</span>    </div>
<div class="line"><span class="lineno">  979</span>    uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = lo3 &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno">  980</span>    </div>
<div class="line"><span class="lineno">  981</span>    <span class="keywordflow">if</span>( <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> ) {</div>
<div class="line"><span class="lineno">  982</span>        </div>
<div class="line"><span class="lineno">  983</span>        <span class="keywordflow">if</span>( hi5 == 31 ) {</div>
<div class="line"><span class="lineno">  984</span>            entry =   <a class="code hl_define" href="../../df/dab/fastled__progmem_8h.html#ac6a3d8446c38aabc9f0f55196a2eae3c">FL_PGM_READ_DWORD_NEAR</a>( &amp;(pal[0]) );</div>
<div class="line"><span class="lineno">  985</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  986</span>            entry =   <a class="code hl_define" href="../../df/dab/fastled__progmem_8h.html#ac6a3d8446c38aabc9f0f55196a2eae3c">FL_PGM_READ_DWORD_NEAR</a>( &amp;(pal[1]) + hi5 );</div>
<div class="line"><span class="lineno">  987</span>        }</div>
<div class="line"><span class="lineno">  988</span>        </div>
<div class="line"><span class="lineno">  989</span>        uint8_t f2 = lo3 &lt;&lt; 5;</div>
<div class="line"><span class="lineno">  990</span>        uint8_t f1 = 255 - f2;</div>
<div class="line"><span class="lineno">  991</span>        </div>
<div class="line"><span class="lineno">  992</span>        uint8_t red2   = entry.red;</div>
<div class="line"><span class="lineno">  993</span>        red1   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1,   f1);</div>
<div class="line"><span class="lineno">  994</span>        red2   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red2,   f2);</div>
<div class="line"><span class="lineno">  995</span>        red1   += red2;</div>
<div class="line"><span class="lineno">  996</span>        </div>
<div class="line"><span class="lineno">  997</span>        uint8_t green2 = entry.green;</div>
<div class="line"><span class="lineno">  998</span>        green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, f1);</div>
<div class="line"><span class="lineno">  999</span>        green2 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green2, f2);</div>
<div class="line"><span class="lineno"> 1000</span>        green1 += green2;</div>
<div class="line"><span class="lineno"> 1001</span>        </div>
<div class="line"><span class="lineno"> 1002</span>        uint8_t blue2  = entry.blue;</div>
<div class="line"><span class="lineno"> 1003</span>        blue1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1,  f1);</div>
<div class="line"><span class="lineno"> 1004</span>        blue2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue2,  f2);</div>
<div class="line"><span class="lineno"> 1005</span>        blue1  += blue2;</div>
<div class="line"><span class="lineno"> 1006</span>        </div>
<div class="line"><span class="lineno"> 1007</span>        <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno"> 1008</span>    }</div>
<div class="line"><span class="lineno"> 1009</span>    </div>
<div class="line"><span class="lineno"> 1010</span>    <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno"> 1011</span>        <span class="keywordflow">if</span>( <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> ) {</div>
<div class="line"><span class="lineno"> 1012</span>            ++<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>; <span class="comment">// adjust for rounding</span></div>
<div class="line"><span class="lineno"> 1013</span>            <span class="comment">// Now, since brightness is nonzero, we don&#39;t need the full scale8_video logic;</span></div>
<div class="line"><span class="lineno"> 1014</span>            <span class="comment">// we can just to scale8 and then add one (unless scale8 fixed) to all nonzero inputs.</span></div>
<div class="line"><span class="lineno"> 1015</span>            <span class="keywordflow">if</span>( red1 )   {</div>
<div class="line"><span class="lineno"> 1016</span>                red1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( red1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1017</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno"> 1018</span>                ++red1;</div>
<div class="line"><span class="lineno"> 1019</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1020</span>            }</div>
<div class="line"><span class="lineno"> 1021</span>            <span class="keywordflow">if</span>( green1 ) {</div>
<div class="line"><span class="lineno"> 1022</span>                green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( green1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1023</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno"> 1024</span>                ++green1;</div>
<div class="line"><span class="lineno"> 1025</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1026</span>            }</div>
<div class="line"><span class="lineno"> 1027</span>            <span class="keywordflow">if</span>( blue1 )  {</div>
<div class="line"><span class="lineno"> 1028</span>                blue1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>( blue1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1029</span><span class="preprocessor">#if !(FASTLED_SCALE8_FIXED==1)</span></div>
<div class="line"><span class="lineno"> 1030</span>                ++blue1;</div>
<div class="line"><span class="lineno"> 1031</span><span class="preprocessor">#endif</span></div>
<div class="line"><span class="lineno"> 1032</span>            }</div>
<div class="line"><span class="lineno"> 1033</span>            <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno"> 1034</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1035</span>            red1 = 0;</div>
<div class="line"><span class="lineno"> 1036</span>            green1 = 0;</div>
<div class="line"><span class="lineno"> 1037</span>            blue1 = 0;</div>
<div class="line"><span class="lineno"> 1038</span>        }</div>
<div class="line"><span class="lineno"> 1039</span>    }</div>
<div class="line"><span class="lineno"> 1040</span>    </div>
<div class="line"><span class="lineno"> 1041</span>    <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>( red1, green1, blue1);</div>
<div class="line"><span class="lineno"> 1042</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../df/dab/fastled__progmem_8h_source.html#l00061">FL_PGM_READ_DWORD_NEAR</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01994">LINEARBLEND_NOWRAP</a>, <a class="el" href="../../df/da5/lib8tion_8h_source.html#l00559">map8()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>.</p>
<div id="dynsection-9" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-9-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-9-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-9-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 9 --></div>
</div>

</div>
</div>
<a id="ga61f55da5eb81ddc50f7855b26fb0d69b" name="ga61f55da5eb81ddc50f7855b26fb0d69b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga61f55da5eb81ddc50f7855b26fb0d69b">&#9670;&#160;</a></span>ColorFromPaletteExtended() <span class="overload">[1/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPaletteExtended </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as ColorFromPalette, but with uint16_t <code>index</code> to give greater precision. </p>
<dl class="section author"><dt>Author</dt><dd><a href="https://github.com/generalelectrix">https://github.com/generalelectrix</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/FastLED/FastLED/pull/202">https://github.com/FastLED/FastLED/pull/202</a> </dd>
<dd>
<a href="https://wokwi.com/projects/285170662915441160">https://wokwi.com/projects/285170662915441160</a> </dd>
<dd>
<a href="https://wokwi.com/projects/407831886158110721">https://wokwi.com/projects/407831886158110721</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00733">733</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  733</span>                                                                                                                  {</div>
<div class="line"><span class="lineno">  734</span>  <span class="comment">// Extract the four most significant bits of the index as a palette index.</span></div>
<div class="line"><span class="lineno">  735</span>  uint8_t index_4bit = index &gt;&gt; 12;</div>
<div class="line"><span class="lineno">  736</span>  <span class="comment">// Calculate the 8-bit offset from the palette index.</span></div>
<div class="line"><span class="lineno">  737</span>  uint8_t offset = (uint8_t)(index &gt;&gt; 4);</div>
<div class="line"><span class="lineno">  738</span>  <span class="comment">// Get the palette entry from the 4-bit index</span></div>
<div class="line"><span class="lineno">  739</span>  <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>* entry = &amp;(pal[0]) + index_4bit;</div>
<div class="line"><span class="lineno">  740</span>  uint8_t red1   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  741</span>  uint8_t green1 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  742</span>  uint8_t blue1  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  743</span> </div>
<div class="line"><span class="lineno">  744</span>  uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = offset &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno">  745</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a>) {</div>
<div class="line"><span class="lineno">  746</span>    <span class="keywordflow">if</span> (index_4bit == 15) {</div>
<div class="line"><span class="lineno">  747</span>      entry = &amp;(pal[0]);</div>
<div class="line"><span class="lineno">  748</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  749</span>      entry++;</div>
<div class="line"><span class="lineno">  750</span>    }</div>
<div class="line"><span class="lineno">  751</span> </div>
<div class="line"><span class="lineno">  752</span>    <span class="comment">// Calculate the scaling factor and scaled values for the lower palette value.</span></div>
<div class="line"><span class="lineno">  753</span>    uint8_t f1 = 255 - offset;</div>
<div class="line"><span class="lineno">  754</span>    red1   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(red1,   f1);</div>
<div class="line"><span class="lineno">  755</span>    green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(green1, f1);</div>
<div class="line"><span class="lineno">  756</span>    blue1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(blue1,  f1);</div>
<div class="line"><span class="lineno">  757</span> </div>
<div class="line"><span class="lineno">  758</span>    <span class="comment">// Calculate the scaled values for the neighbouring palette value.</span></div>
<div class="line"><span class="lineno">  759</span>    uint8_t red2   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  760</span>    uint8_t green2 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  761</span>    uint8_t blue2  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  762</span>    red2   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(red2,   offset);</div>
<div class="line"><span class="lineno">  763</span>    green2 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(green2, offset);</div>
<div class="line"><span class="lineno">  764</span>    blue2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(blue2,  offset);</div>
<div class="line"><span class="lineno">  765</span>    <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  766</span> </div>
<div class="line"><span class="lineno">  767</span>    <span class="comment">// These sums can&#39;t overflow, so no qadd8 needed.</span></div>
<div class="line"><span class="lineno">  768</span>    red1   += red2;</div>
<div class="line"><span class="lineno">  769</span>    green1 += green2;</div>
<div class="line"><span class="lineno">  770</span>    blue1  += blue2;</div>
<div class="line"><span class="lineno">  771</span>  }</div>
<div class="line"><span class="lineno">  772</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno">  773</span>    <span class="comment">// nscale8x3_video(red1, green1, blue1, brightness);</span></div>
<div class="line"><span class="lineno">  774</span>    <a class="code hl_function" href="../../d0/da8/group___scaling.html#ga39bf87e5526120889086cab19ac749b1">nscale8x3</a>(red1, green1, blue1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  775</span>  }</div>
<div class="line"><span class="lineno">  776</span>  <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>(red1, green1, blue1);</div>
<div class="line"><span class="lineno">  777</span>}</div>
<div class="ttc" id="agroup___scaling_html_ga39bf87e5526120889086cab19ac749b1"><div class="ttname"><a href="../../d0/da8/group___scaling.html#ga39bf87e5526120889086cab19ac749b1">nscale8x3</a></div><div class="ttdeci">LIB8STATIC void nscale8x3(uint8_t &amp;r, uint8_t &amp;g, uint8_t &amp;b, fract8 scale)</div><div class="ttdoc">Scale three one-byte values by a fourth one, which is treated as the numerator of a fraction whose de...</div><div class="ttdef"><b>Definition</b> <a href="../../db/d91/scale8_8h_source.html#l00357">scale8.h:357</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00357">nscale8x3()</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>.</p>
<div id="dynsection-10" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-10-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-10-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-10-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 10 --></div>
</div>

</div>
</div>
<a id="ga681c8340a30e692e7bbfec5a104cc80f" name="ga681c8340a30e692e7bbfec5a104cc80f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga681c8340a30e692e7bbfec5a104cc80f">&#9670;&#160;</a></span>ColorFromPaletteExtended() <span class="overload">[2/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPaletteExtended </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#de/d34/class_c_r_g_b_palette256">CRGBPalette256</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01065">1065</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1065</span>                                                                                                                   {</div>
<div class="line"><span class="lineno"> 1066</span>  <span class="comment">// Extract the eight most significant bits of the index as a palette index.</span></div>
<div class="line"><span class="lineno"> 1067</span>  uint8_t index_8bit = index &gt;&gt; 8;</div>
<div class="line"><span class="lineno"> 1068</span>  <span class="comment">// Calculate the 8-bit offset from the palette index.</span></div>
<div class="line"><span class="lineno"> 1069</span>  uint8_t offset = index &amp; 0xff;</div>
<div class="line"><span class="lineno"> 1070</span>  <span class="comment">// Get the palette entry from the 8-bit index</span></div>
<div class="line"><span class="lineno"> 1071</span>  <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>* entry = &amp;(pal[0]) + index_8bit;</div>
<div class="line"><span class="lineno"> 1072</span>  uint8_t red1   = entry-&gt;red;</div>
<div class="line"><span class="lineno"> 1073</span>  uint8_t green1 = entry-&gt;green;</div>
<div class="line"><span class="lineno"> 1074</span>  uint8_t blue1  = entry-&gt;blue;</div>
<div class="line"><span class="lineno"> 1075</span> </div>
<div class="line"><span class="lineno"> 1076</span>  uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = offset &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno"> 1077</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a>) {</div>
<div class="line"><span class="lineno"> 1078</span>    <span class="keywordflow">if</span> (index_8bit == 255) {</div>
<div class="line"><span class="lineno"> 1079</span>      entry = &amp;(pal[0]);</div>
<div class="line"><span class="lineno"> 1080</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 1081</span>      entry++;</div>
<div class="line"><span class="lineno"> 1082</span>    }</div>
<div class="line"><span class="lineno"> 1083</span> </div>
<div class="line"><span class="lineno"> 1084</span>    <span class="comment">// Calculate the scaling factor and scaled values for the lower palette value.</span></div>
<div class="line"><span class="lineno"> 1085</span>    uint8_t f1 = 255 - offset;</div>
<div class="line"><span class="lineno"> 1086</span>    red1   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(red1,   f1);</div>
<div class="line"><span class="lineno"> 1087</span>    green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(green1, f1);</div>
<div class="line"><span class="lineno"> 1088</span>    blue1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(blue1,  f1);</div>
<div class="line"><span class="lineno"> 1089</span> </div>
<div class="line"><span class="lineno"> 1090</span>    <span class="comment">// Calculate the scaled values for the neighbouring palette value.</span></div>
<div class="line"><span class="lineno"> 1091</span>    uint8_t red2   = entry-&gt;red;</div>
<div class="line"><span class="lineno"> 1092</span>    uint8_t green2 = entry-&gt;green;</div>
<div class="line"><span class="lineno"> 1093</span>    uint8_t blue2  = entry-&gt;blue;</div>
<div class="line"><span class="lineno"> 1094</span>    red2   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(red2,   offset);</div>
<div class="line"><span class="lineno"> 1095</span>    green2 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(green2, offset);</div>
<div class="line"><span class="lineno"> 1096</span>    blue2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(blue2,  offset);</div>
<div class="line"><span class="lineno"> 1097</span>    <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno"> 1098</span> </div>
<div class="line"><span class="lineno"> 1099</span>    <span class="comment">// These sums can&#39;t overflow, so no qadd8 needed.</span></div>
<div class="line"><span class="lineno"> 1100</span>    red1   += red2;</div>
<div class="line"><span class="lineno"> 1101</span>    green1 += green2;</div>
<div class="line"><span class="lineno"> 1102</span>    blue1  += blue2;</div>
<div class="line"><span class="lineno"> 1103</span>  }</div>
<div class="line"><span class="lineno"> 1104</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno"> 1105</span>    <span class="comment">// nscale8x3_video(red1, green1, blue1, brightness);</span></div>
<div class="line"><span class="lineno"> 1106</span>    <a class="code hl_function" href="../../d0/da8/group___scaling.html#ga39bf87e5526120889086cab19ac749b1">nscale8x3</a>(red1, green1, blue1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno"> 1107</span>  }</div>
<div class="line"><span class="lineno"> 1108</span>  <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>(red1, green1, blue1);</div>
<div class="line"><span class="lineno"> 1109</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00357">nscale8x3()</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>.</p>
<div id="dynsection-11" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-11-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-11-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-11-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 11 --></div>
</div>

</div>
</div>
<a id="ga59c2f3e8a12b9eef789c37ae4d5f0182" name="ga59c2f3e8a12b9eef789c37ae4d5f0182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga59c2f3e8a12b9eef789c37ae4d5f0182">&#9670;&#160;</a></span>ColorFromPaletteExtended() <span class="overload">[3/3]</span></h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> ColorFromPaletteExtended </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d6/d39/group___palette_classes.html#df/d3d/class_c_r_g_b_palette32">CRGBPalette32</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>index</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Same as ColorFromPalette, but higher precision. </p>
<p>Will eventually become the default. </p><dl class="section author"><dt>Author</dt><dd><a href="https://github.com/generalelectrix">https://github.com/generalelectrix</a> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a href="https://github.com/FastLED/FastLED/pull/202#issuecomment-631333384">https://github.com/FastLED/FastLED/pull/202#issuecomment-631333384</a> </dd>
<dd>
<a href="https://wokwi.com/projects/285170662915441160">https://wokwi.com/projects/285170662915441160</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00599">599</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno">  599</span>                                                                                                                  {</div>
<div class="line"><span class="lineno">  600</span>  <span class="comment">// Extract the five most significant bits of the index as a palette index.</span></div>
<div class="line"><span class="lineno">  601</span>  uint8_t index_5bit = (index &gt;&gt; 11);</div>
<div class="line"><span class="lineno">  602</span>  <span class="comment">// Calculate the 8-bit offset from the palette index.</span></div>
<div class="line"><span class="lineno">  603</span>  uint8_t offset = (uint8_t)(index &gt;&gt; 3);</div>
<div class="line"><span class="lineno">  604</span>  <span class="comment">// Get the palette entry from the 5-bit index</span></div>
<div class="line"><span class="lineno">  605</span>  <span class="keyword">const</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>* entry = &amp;(pal[0]) + index_5bit;</div>
<div class="line"><span class="lineno">  606</span>  uint8_t red1   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  607</span>  uint8_t green1 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  608</span>  uint8_t blue1  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  609</span> </div>
<div class="line"><span class="lineno">  610</span>  uint8_t <a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a> = offset &amp;&amp; (blendType != <a class="code hl_enumvalue" href="#gga565c04e626af4a3ec44bf97edc607b4ea754b67bead50dd3c843e930e9bfa2f00">NOBLEND</a>);</div>
<div class="line"><span class="lineno">  611</span>  <span class="keywordflow">if</span> (<a class="code hl_function" href="../../dc/db8/group___color_blends.html#ga4f06b4423f71f77346aaf5dabe7dd05c">blend</a>) {</div>
<div class="line"><span class="lineno">  612</span>    <span class="keywordflow">if</span> (index_5bit == 31) {</div>
<div class="line"><span class="lineno">  613</span>      entry = &amp;(pal[0]);</div>
<div class="line"><span class="lineno">  614</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno">  615</span>      entry++;</div>
<div class="line"><span class="lineno">  616</span>    }</div>
<div class="line"><span class="lineno">  617</span> </div>
<div class="line"><span class="lineno">  618</span>    <span class="comment">// Calculate the scaling factor and scaled values for the lower palette value.</span></div>
<div class="line"><span class="lineno">  619</span>    uint8_t f1 = 255 - offset;</div>
<div class="line"><span class="lineno">  620</span>    red1   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(red1,   f1);</div>
<div class="line"><span class="lineno">  621</span>    green1 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(green1, f1);</div>
<div class="line"><span class="lineno">  622</span>    blue1  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(blue1,  f1);</div>
<div class="line"><span class="lineno">  623</span> </div>
<div class="line"><span class="lineno">  624</span>    <span class="comment">// Calculate the scaled values for the neighbouring palette value.</span></div>
<div class="line"><span class="lineno">  625</span>    uint8_t red2   = entry-&gt;red;</div>
<div class="line"><span class="lineno">  626</span>    uint8_t green2 = entry-&gt;green;</div>
<div class="line"><span class="lineno">  627</span>    uint8_t blue2  = entry-&gt;blue;</div>
<div class="line"><span class="lineno">  628</span>    red2   = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(red2,   offset);</div>
<div class="line"><span class="lineno">  629</span>    green2 = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(green2, offset);</div>
<div class="line"><span class="lineno">  630</span>    blue2  = <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga7386235cada3aca429b189681d2ec56d">scale8_LEAVING_R1_DIRTY</a>(blue2,  offset);</div>
<div class="line"><span class="lineno">  631</span>    <a class="code hl_function" href="../../d0/da5/group___scaling_dirty.html#ga3fade00fb4cf5b937b973128198a7a79">cleanup_R1</a>();</div>
<div class="line"><span class="lineno">  632</span> </div>
<div class="line"><span class="lineno">  633</span>    <span class="comment">// These sums can&#39;t overflow, so no qadd8 needed.</span></div>
<div class="line"><span class="lineno">  634</span>    red1   += red2;</div>
<div class="line"><span class="lineno">  635</span>    green1 += green2;</div>
<div class="line"><span class="lineno">  636</span>    blue1  += blue2;</div>
<div class="line"><span class="lineno">  637</span>  }</div>
<div class="line"><span class="lineno">  638</span>  <span class="keywordflow">if</span> (<a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a> != 255) {</div>
<div class="line"><span class="lineno">  639</span>    <a class="code hl_function" href="../../d0/da8/group___scaling.html#ga700b7f510f32e8c91385093c436c27d9">nscale8x3_video</a>(red1, green1, blue1, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>);</div>
<div class="line"><span class="lineno">  640</span>  }</div>
<div class="line"><span class="lineno">  641</span>  <span class="keywordflow">return</span> <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a>(red1, green1, blue1);</div>
<div class="line"><span class="lineno">  642</span>}</div>
<div class="ttc" id="agroup___scaling_html_ga700b7f510f32e8c91385093c436c27d9"><div class="ttname"><a href="../../d0/da8/group___scaling.html#ga700b7f510f32e8c91385093c436c27d9">nscale8x3_video</a></div><div class="ttdeci">LIB8STATIC void nscale8x3_video(uint8_t &amp;r, uint8_t &amp;g, uint8_t &amp;b, fract8 scale)</div><div class="ttdoc">Scale three one-byte values by a fourth one, which is treated as the numerator of a fraction whose de...</div><div class="ttdef"><b>Definition</b> <a href="../../db/d91/scale8_8h_source.html#l00391">scale8.h:391</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00347">blend()</a>, <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00333">cleanup_R1()</a>, <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01992">NOBLEND</a>, <a class="el" href="../../db/d91/scale8_8h_source.html#l00391">nscale8x3_video()</a>, and <a class="el" href="../../db/d91/scale8_8h_source.html#l00170">scale8_LEAVING_R1_DIRTY()</a>.</p>
<div id="dynsection-12" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-12-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-12-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-12-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 12 --></div>
</div>

</div>
</div>
<a id="gac3c3f6bd497b7916177d7cb95aa5a76c" name="gac3c3f6bd497b7916177d7cb95aa5a76c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac3c3f6bd497b7916177d7cb95aa5a76c">&#9670;&#160;</a></span>fill_palette()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PALETTE &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void fill_palette </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> *</td>          <td class="paramname"><span class="paramname"><em>L</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>N</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>startIndex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>incIndex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PALETTE &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill a range of LEDs with a sequence of entries from a palette. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">PALETTE</td><td>the type of the palette used (auto-deduced) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">L</td><td>pointer to the LED array to fill </td></tr>
    <tr><td class="paramname">N</td><td>number of LEDs to fill in the array </td></tr>
    <tr><td class="paramname">startIndex</td><td>the starting color index in the palette </td></tr>
    <tr><td class="paramname">incIndex</td><td>how much to increment the palette color index per LED </td></tr>
    <tr><td class="paramname">pal</td><td>the color palette to pull colors from </td></tr>
    <tr><td class="paramname">brightness</td><td>brightness value used to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l02094">2094</a> of file <a class="el" href="../../d1/dfb/colorutils_8h_source.html">colorutils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2096</span>{</div>
<div class="line"><span class="lineno"> 2097</span>    uint8_t colorIndex = startIndex;</div>
<div class="line"><span class="lineno"> 2098</span>    <span class="keywordflow">for</span>( uint16_t i = 0; i &lt; N; ++i) {</div>
<div class="line"><span class="lineno"> 2099</span>        L[i] = <a class="code hl_function" href="#gac46e65aff3dd6519b33e27f0998f17cd">ColorFromPalette</a>( pal, colorIndex, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, blendType);</div>
<div class="line"><span class="lineno"> 2100</span>        colorIndex += incIndex;</div>
<div class="line"><span class="lineno"> 2101</span>    }</div>
<div class="line"><span class="lineno"> 2102</span>}</div>
<div class="ttc" id="agroup___palette_colors_html_gac46e65aff3dd6519b33e27f0998f17cd"><div class="ttname"><a href="#gac46e65aff3dd6519b33e27f0998f17cd">ColorFromPalette</a></div><div class="ttdeci">CRGB ColorFromPalette(const CRGBPalette16 &amp;pal, uint8_t index, uint8_t brightness=255, TBlendType blendType=LINEARBLEND)</div><div class="ttdoc">Get a color from a palette.</div><div class="ttdef"><b>Definition</b> <a href="../../da/d2d/colorutils_8cpp_source.html#l00644">colorutils.cpp:644</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, and <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00644">ColorFromPalette()</a>.</p>
<div id="dynsection-13" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-13-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-13-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-13-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 13 --></div>
</div>

</div>
</div>
<a id="ga08fe42a864e3a7ee802d89a9b72d97c1" name="ga08fe42a864e3a7ee802d89a9b72d97c1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga08fe42a864e3a7ee802d89a9b72d97c1">&#9670;&#160;</a></span>fill_palette_circular()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PALETTE &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void fill_palette_circular </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> *</td>          <td class="paramname"><span class="paramname"><em>L</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>N</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>startIndex</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PALETTE &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool</td>          <td class="paramname"><span class="paramname"><em>reversed</em></span><span class="paramdefsep"> = </span><span class="paramdefval">false</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Fill a range of LEDs with a sequence of entries from a palette, so that the entire palette smoothly covers the range of LEDs. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">PALETTE</td><td>the type of the palette used (auto-deduced) </td></tr>
  </table>
  </dd>
</dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">L</td><td>pointer to the LED array to fill </td></tr>
    <tr><td class="paramname">N</td><td>number of LEDs to fill in the array </td></tr>
    <tr><td class="paramname">startIndex</td><td>the starting color index in the palette </td></tr>
    <tr><td class="paramname">pal</td><td>the color palette to pull colors from </td></tr>
    <tr><td class="paramname">brightness</td><td>brightness value used to scale the resulting color </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND) </td></tr>
    <tr><td class="paramname">reversed</td><td>whether to progress through the palette backwards </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l02117">2117</a> of file <a class="el" href="../../d1/dfb/colorutils_8h_source.html">colorutils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2120</span>{</div>
<div class="line"><span class="lineno"> 2121</span>    <span class="keywordflow">if</span> (N == 0) <span class="keywordflow">return</span>;  <span class="comment">// avoiding div/0</span></div>
<div class="line"><span class="lineno"> 2122</span> </div>
<div class="line"><span class="lineno"> 2123</span>    <span class="keyword">const</span> uint16_t colorChange = 65535 / N;              <span class="comment">// color change for each LED, * 256 for precision</span></div>
<div class="line"><span class="lineno"> 2124</span>    uint16_t colorIndex = ((uint16_t) startIndex) &lt;&lt; 8;  <span class="comment">// offset for color index, with precision (*256)</span></div>
<div class="line"><span class="lineno"> 2125</span> </div>
<div class="line"><span class="lineno"> 2126</span>   <span class="keywordflow">for</span> (uint16_t i = 0; i &lt; N; ++i) {</div>
<div class="line"><span class="lineno"> 2127</span>        L[i] = <a class="code hl_function" href="#gac46e65aff3dd6519b33e27f0998f17cd">ColorFromPalette</a>(pal, (colorIndex &gt;&gt; 8), <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, blendType);</div>
<div class="line"><span class="lineno"> 2128</span>        <span class="keywordflow">if</span> (reversed) colorIndex -= colorChange;</div>
<div class="line"><span class="lineno"> 2129</span>        <span class="keywordflow">else</span> colorIndex += colorChange;</div>
<div class="line"><span class="lineno"> 2130</span>    }</div>
<div class="line"><span class="lineno"> 2131</span>}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, and <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00644">ColorFromPalette()</a>.</p>
<div id="dynsection-14" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-14-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-14-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-14-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 14 --></div>
</div>

</div>
</div>
<a id="gaf34a692bbec05b697dc9c06d8bb0f74f" name="gaf34a692bbec05b697dc9c06d8bb0f74f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaf34a692bbec05b697dc9c06d8bb0f74f">&#9670;&#160;</a></span>map_data_into_colors_through_palette()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename PALETTE &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void map_data_into_colors_through_palette </td>
          <td>(</td>
          <td class="paramtype">uint8_t *</td>          <td class="paramname"><span class="paramname"><em>dataArray</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint16_t</td>          <td class="paramname"><span class="paramname"><em>dataCount</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> *</td>          <td class="paramname"><span class="paramname"><em>targetColorArray</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const PALETTE &amp;</td>          <td class="paramname"><span class="paramname"><em>pal</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>brightness</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>opacity</em></span><span class="paramdefsep"> = </span><span class="paramdefval">255</span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="#ga565c04e626af4a3ec44bf97edc607b4e">TBlendType</a></td>          <td class="paramname"><span class="paramname"><em>blendType</em></span><span class="paramdefsep"> = </span><span class="paramdefval"><a class="el" href="#gga565c04e626af4a3ec44bf97edc607b4ea7a36ed58acc67878c9dd1b6a83910f06">LINEARBLEND</a></span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maps an array of palette color indexes into an array of LED colors. </p>
<p>This function provides an easy way to create lightweight color patterns that can be deployed using any palette.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dataArray</td><td>the source array, containing color indexes for the palette </td></tr>
    <tr><td class="paramname">dataCount</td><td>the number of data elements in the array </td></tr>
    <tr><td class="paramname">targetColorArray</td><td>the LED array to store the resulting colors into. Must be at least as long as <code>dataCount</code>. </td></tr>
    <tr><td class="paramname">pal</td><td>the color palette to pull colors from </td></tr>
    <tr><td class="paramname">brightness</td><td>optional brightness value used to scale the resulting color </td></tr>
    <tr><td class="paramname">opacity</td><td>optional opacity value for the new color. If this is 255 (default), the new colors will be written to the array directly. Otherwise the existing LED data will be scaled down using <code><a class="el" href="../../db/d87/group___pixel_types.html#a0441d6094ab8f98d800ec789c36b4461" title="Scale down a RGB to N/256ths of it&#39;s current brightness using &quot;video&quot; dimming rules.">CRGB::nscale8_video()</a></code> and then new colors will be added on top. A higher value means that the new colors will be more visible. </td></tr>
    <tr><td class="paramname">blendType</td><td>whether to take the palette entries directly (NOBLEND) or blend linearly between palette entries (LINEARBLEND) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l02152">2152</a> of file <a class="el" href="../../d1/dfb/colorutils_8h_source.html">colorutils.h</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 2159</span>{</div>
<div class="line"><span class="lineno"> 2160</span>    <span class="keywordflow">for</span>( uint16_t i = 0; i &lt; dataCount; ++i) {</div>
<div class="line"><span class="lineno"> 2161</span>        uint8_t d = dataArray[i];</div>
<div class="line"><span class="lineno"> 2162</span>        <a class="code hl_struct" href="../../db/d87/group___pixel_types.html#d7/d82/struct_c_r_g_b">CRGB</a> rgb = <a class="code hl_function" href="#gac46e65aff3dd6519b33e27f0998f17cd">ColorFromPalette</a>( pal, d, <a class="code hl_variable" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, blendType);</div>
<div class="line"><span class="lineno"> 2163</span>        <span class="keywordflow">if</span>( opacity == 255 ) {</div>
<div class="line"><span class="lineno"> 2164</span>            targetColorArray[i] = rgb;</div>
<div class="line"><span class="lineno"> 2165</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><span class="lineno"> 2166</span>            targetColorArray[i].<a class="code hl_function" href="../../db/d87/group___pixel_types.html#a5a3c3370a7de840ac31c07f6dc9bdb63">nscale8</a>( 256 - opacity);</div>
<div class="line"><span class="lineno"> 2167</span>            rgb.<a class="code hl_function" href="../../db/d87/group___pixel_types.html#a0441d6094ab8f98d800ec789c36b4461">nscale8_video</a>( opacity);</div>
<div class="line"><span class="lineno"> 2168</span>            targetColorArray[i] += rgb;</div>
<div class="line"><span class="lineno"> 2169</span>        }</div>
<div class="line"><span class="lineno"> 2170</span>    }</div>
<div class="line"><span class="lineno"> 2171</span>}</div>
<div class="ttc" id="agroup___pixel_types_html_a0441d6094ab8f98d800ec789c36b4461"><div class="ttname"><a href="../../db/d87/group___pixel_types.html#a0441d6094ab8f98d800ec789c36b4461">CRGB::nscale8_video</a></div><div class="ttdeci">FASTLED_FORCE_INLINE CRGB &amp; nscale8_video(uint8_t scaledown)</div><div class="ttdoc">Scale down a RGB to N/256ths of it's current brightness using &quot;video&quot; dimming rules.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/d4b/crgb_8hpp_source.html#l00078">crgb.hpp:78</a></div></div>
<div class="ttc" id="agroup___pixel_types_html_a5a3c3370a7de840ac31c07f6dc9bdb63"><div class="ttname"><a href="../../db/d87/group___pixel_types.html#a5a3c3370a7de840ac31c07f6dc9bdb63">CRGB::nscale8</a></div><div class="ttdeci">CRGB &amp; nscale8(uint8_t scaledown)</div><div class="ttdoc">Scale down a RGB to N/256ths of its current brightness, using &quot;plain math&quot; dimming rules.</div><div class="ttdef"><b>Definition</b> <a href="../../d0/de3/crgb_8cpp_source.html#l00058">crgb.cpp:58</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../dd/d96/_fx_animartrix_8ino.html#aad82f6f7577fe4fbd31a5bd033ec4638">brightness</a>, <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l00644">ColorFromPalette()</a>, <a class="el" href="../../d0/de3/crgb_8cpp_source.html#l00058">CRGB::nscale8()</a>, and <a class="el" href="../../d0/d4b/crgb_8hpp_source.html#l00078">CRGB::nscale8_video()</a>.</p>
<div id="dynsection-15" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-15-trigger" src="../../closed.png" alt="+"/> Here is the call graph for this function:</div>
<div id="dynsection-15-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-15-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 15 --></div>
</div>

</div>
</div>
<a id="ga361799a4ba193694ad974079c980430c" name="ga361799a4ba193694ad974079c980430c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga361799a4ba193694ad974079c980430c">&#9670;&#160;</a></span>nblendPaletteTowardPalette()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nblendPaletteTowardPalette </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>currentPalette</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a> &amp;</td>          <td class="paramname"><span class="paramname"><em>targetPalette</em></span>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t</td>          <td class="paramname"><span class="paramname"><em>maxChanges</em></span><span class="paramdefsep"> = </span><span class="paramdefval">24</span>&#160;)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Alter one palette by making it slightly more like a "target palette". </p>
<p>Used for palette cross-fades.</p>
<p>It does this by comparing each of the R, G, and B channels of each entry in the current palette to the corresponding entry in the target palette and making small adjustments:</p><ul>
<li>If the CRGB::red channel is too low, it will be increased.</li>
<li>If the CRGB::red channel is too high, it will be slightly reduced.</li>
</ul>
<p>...and so on and so forth for the CRGB::green and CRGB::blue channels.</p>
<p>Additionally, there are two significant visual improvements to this algorithm implemented here. First is this:</p><ul>
<li>When increasing a channel, it is stepped up by ONE.</li>
<li>When decreasing a channel, it is stepped down by TWO.</li>
</ul>
<p>Due to the way the eye perceives light, and the way colors are represented in RGB, this produces a more uniform apparent brightness when cross-fading between most palette colors.</p>
<p>The second visual tweak is limiting the number of changes that will be made to the palette at once. If all the palette entries are changed at once, it can give a muddled appearance. However, if only a <em>few</em> palette entries are changed at once, you get a visually smoother transition: in the middle of the cross-fade your current palette will actually contain some colors from the old palette, a few blended colors, and some colors from the new palette.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">currentPalette</td><td>the palette to modify </td></tr>
    <tr><td class="paramname">targetPalette</td><td>the palette to move towards </td></tr>
    <tr><td class="paramname">maxChanges</td><td>the maximum number of possible palette changes to make to the color channels per call. The limit is 48 (16 color entries times 3 channels each). The default is 24, meaning that only half of the palette entries can be changed per call. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>The palette passed as <code>currentPalette</code> will be modified! Be sure to make a copy beforehand if needed. </dd></dl>
<dl class="todo"><dt><b><a class="el" href="../../dd/da0/todo.html#_todo000006">Todo</a></b></dt><dd>Shouldn't the <code>targetPalette</code> be <code>const</code>? </dd></dl>

<p class="definition">Definition at line <a class="el" href="../../da/d2d/colorutils_8cpp_source.html#l01365">1365</a> of file <a class="el" href="../../da/d2d/colorutils_8cpp_source.html">colorutils.cpp</a>.</p>
<div class="fragment"><div class="line"><span class="lineno"> 1366</span>{</div>
<div class="line"><span class="lineno"> 1367</span>    uint8_t* p1;</div>
<div class="line"><span class="lineno"> 1368</span>    uint8_t* p2;</div>
<div class="line"><span class="lineno"> 1369</span>    uint8_t  changes = 0;</div>
<div class="line"><span class="lineno"> 1370</span> </div>
<div class="line"><span class="lineno"> 1371</span>    p1 = (uint8_t*)current.entries;</div>
<div class="line"><span class="lineno"> 1372</span>    p2 = (uint8_t*)target.entries;</div>
<div class="line"><span class="lineno"> 1373</span> </div>
<div class="line"><span class="lineno"> 1374</span>    <span class="keyword">const</span> uint8_t totalChannels = <span class="keyword">sizeof</span>(<a class="code hl_class" href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a>);</div>
<div class="line"><span class="lineno"> 1375</span>    <span class="keywordflow">for</span>( uint8_t i = 0; i &lt; totalChannels; ++i) {</div>
<div class="line"><span class="lineno"> 1376</span>        <span class="comment">// if the values are equal, no changes are needed</span></div>
<div class="line"><span class="lineno"> 1377</span>        <span class="keywordflow">if</span>( p1[i] == p2[i] ) { <span class="keywordflow">continue</span>; }</div>
<div class="line"><span class="lineno"> 1378</span> </div>
<div class="line"><span class="lineno"> 1379</span>        <span class="comment">// if the current value is less than the target, increase it by one</span></div>
<div class="line"><span class="lineno"> 1380</span>        <span class="keywordflow">if</span>( p1[i] &lt; p2[i] ) { ++p1[i]; ++changes; }</div>
<div class="line"><span class="lineno"> 1381</span> </div>
<div class="line"><span class="lineno"> 1382</span>        <span class="comment">// if the current value is greater than the target,</span></div>
<div class="line"><span class="lineno"> 1383</span>        <span class="comment">// increase it by one (or two if it&#39;s still greater).</span></div>
<div class="line"><span class="lineno"> 1384</span>        <span class="keywordflow">if</span>( p1[i] &gt; p2[i] ) {</div>
<div class="line"><span class="lineno"> 1385</span>            --p1[i]; ++changes;</div>
<div class="line"><span class="lineno"> 1386</span>            <span class="keywordflow">if</span>( p1[i] &gt; p2[i] ) { --p1[i]; }</div>
<div class="line"><span class="lineno"> 1387</span>        }</div>
<div class="line"><span class="lineno"> 1388</span> </div>
<div class="line"><span class="lineno"> 1389</span>        <span class="comment">// if we&#39;ve hit the maximum number of changes, exit</span></div>
<div class="line"><span class="lineno"> 1390</span>        <span class="keywordflow">if</span>( changes &gt;= maxChanges) { <span class="keywordflow">break</span>; }</div>
<div class="line"><span class="lineno"> 1391</span>    }</div>
<div class="line"><span class="lineno"> 1392</span>}</div>
<div class="ttc" id="agroup___palette_classes_html_d2/dc4/class_c_r_g_b_palette16"><div class="ttname"><a href="../../d6/d39/group___palette_classes.html#d2/dc4/class_c_r_g_b_palette16">CRGBPalette16</a></div><div class="ttdoc">RGB color palette with 16 discrete values.</div><div class="ttdef"><b>Definition</b> <a href="../../d1/dfb/colorutils_8h_source.html#l01004">colorutils.h:1004</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="../../d1/dfb/colorutils_8h_source.html#l01006">CRGBPalette16::entries</a>.</p>

<p class="reference">Referenced by <a class="el" href="../../d1/df6/twinklefox_8h_source.html#l00125">fl::TwinkleFox::draw()</a>, and <a class="el" href="../../d4/dd0/_twinkle_fox_8ino_source.html#l00126">loop()</a>.</p>
<div id="dynsection-16" onclick="return dynsection.toggleVisibility(this)" class="dynheader closed" style="cursor:pointer;">
  <img id="dynsection-16-trigger" src="../../closed.png" alt="+"/> Here is the caller graph for this function:</div>
<div id="dynsection-16-summary" class="dynsummary" style="display:block;">
</div>
<div id="dynsection-16-content" class="dyncontent" style="display:none;">
<div class="center"><!-- SVG 16 --></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.9.3-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Tue Apr 8 2025 12:21:01 for FastLED by <a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.12.0 </li>
  </ul>
</div>
<!-- ... -->
</body>
</html>
